ogendis.txt
-------------------------------------------------------------------------------
	4.1.1.2	The GDI_document Field

Applications often use the Document Control objects to manage files. With
this mechanism, every file is associated with a document object. Often, each
file will have its own GenDisplay object as well. In this case, GDI_document
will contain an optr to the GenDocument object associated with this
GenDisplay. For more information on this, see section 4.3 on page 344. ***The
Document Control objects create and destroy the GenDisplays automatically,
and set this field accordingly***. The GenDisplay object uses this field only when
the display is closed; see section 4.3.3.1 on page 353. To retrieve the value of
this field, send MSG_GEN_DISPLAY_GET_DOCUMENT to the display (see
section 4.3.3.3 on page 354).


cwinDisplay.asm
-------------------------------------------------------------------------------
OLDisplayWinGenCloseInteraction	method dynamic	OLDisplayWinClass, \
					MSG_GEN_DISPLAY_CLOSE

EC <	call	GenCheckGenAssumption	; Make sure gen data exists >

	; if this display is connected to a document, close the document
	; but don't close the display.  If the document is really closed
	; then that will cause the display to close.  If the user cancels
	; the close, we don't want to close the display

	mov	di, ds:[si]		;check if is USER_DISMISSABLE
	add	di, ds:[di].Gen_offset	;ds:di is GenInstance
	test	ds:[di].GDI_attributes, mask GDA_USER_DISMISSABLE
	jz	done
	mov	bx, ds:[di].GDI_document.handle
	tst	bx
	jz	noDocument
	mov	si, ds:[di].GDI_document.chunk
	clr	bp			;user initiated
	mov	ax, MSG_GEN_DOCUMENT_CLOSE
	mov	di, mask MF_FIXUP_DS
	GOTO	ObjMessage

noDocument:

	; otherwise, subclass must handle

done:
	ret

ogendis.txt
-------------------------------------------------------------------------------
If the application uses one display for each document, it should use the
Document Control objects to create the displays. The Document Control can
automatically duplicate a resource containing a generic object tree headed by
a GenDisplay and make that GenDisplay a child of the GenDisplayGroup
each time a document is opened or created. For details, see "GenDocument,"
Chapter 13.



ogendis.txt
-------------------------------------------------------------------------------
void	MSG_GEN_DISPLAY_CLOSE();

This message is sent to a Display to close it. The system sends it when the
user uses the specific UI's way of closing a window. The GenDisplayClass
handler does nothing but send a MSG_GEN_DOCUMENT_CLOSE to the
Document object specified in GDI_document. The GenPrimaryClass
handler closes the application.

Source:	Unrestricted.

Destination:	GenDisplay.

Interception:	If the Display is not associated with a GenDocument, you will need to
subclass this message for it to have any effect at all. If the display is
associated with a GenDocument object, you should probably subclass
your Document object's MSG_GEN_DOCUMENT_CLOSE instead.
Primary objects may subclass this message if they want to alter or
replace the default behavior (of closing the application).

cmainUIDocumentControl.asm
-------------------------------------------------------------------------------
//MSG_GEN_DISPLAY_GET_DOCUMENT
MSG_GEN_DOCUMENT_CONTROL_FILE_CHANGED => MSG_GEN_DISPLAY_UPDATE_FROM_DOCUMENT

