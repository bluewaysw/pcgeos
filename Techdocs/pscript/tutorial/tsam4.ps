%!PS-Adobe-3.0
%%BoundingBox: (atend)
%%Pages: (atend)
%%PageOrder: (atend)
%%DocumentFonts: (atend)
%%Creator: Frame 4.0
%%DocumentData: Clean7Bit
%%EndComments
%%BeginProlog
%
% Frame ps_prolog 4.0, for use with Frame 4.0 products
% This ps_prolog file is Copyright (c) 1986-1993 Frame Technology
% Corporation.  All rights reserved.  This ps_prolog file may be
% freely copied and distributed in conjunction with documents created
% using FrameMaker, FrameBuilder and FrameViewer as long as this 
% copyright notice is preserved.
%
% Frame products normally print colors as their true color on a color printer
% or as shades of gray, based on luminance, on a black-and white printer. The
% following flag, if set to True, forces all non-white colors to print as pure
% black. This has no effect on bitmap images.
/FMPrintAllColorsAsBlack             false def
%
% Frame products can either set their own line screens or use a printer's 
% default settings. Three flags below control this separately for no 
% separations, spot separations and process separations. If a flag
% is true, then the default printer settings will not be changed. If it is
% false, Frame products will use their own settings from a table based on
% the printer's resolution.
/FMUseDefaultNoSeparationScreen      true  def
/FMUseDefaultSpotSeparationScreen    true  def
/FMUseDefaultProcessSeparationScreen false def
%
% For any given PostScript printer resolution, Frame products have two sets of 
% screen angles and frequencies for printing process separations, which are 
% recomended by Adobe. The following variable chooses the higher frequencies
% when set to true or the lower frequencies when set to false. This is only
% effective if the appropriate FMUseDefault...SeparationScreen flag is false.
/FMUseHighFrequencyScreens true def
%
% PostScript Level 2 printers contain an "Accurate Screens" feature which can
% improve process separation rendering at the expense of compute time. This 
% flag is ignored by PostScript Level 1 printers.
/FMUseAcccurateScreens true def
%
% The following PostScript procedure defines the spot function that Frame
% products will use for process separations. You may un-comment-out one of
% the alternative functions below, or use your own.
%
% Dot function
/FMSpotFunction {abs exch abs 2 copy add 1 gt 
		{1 sub dup mul exch 1 sub dup mul add 1 sub }
		{dup mul exch dup mul add 1 exch sub }ifelse } def
%
% Line function
% /FMSpotFunction { pop } def
%
% Elipse function
% /FMSpotFunction { dup 5 mul 8 div mul exch dup mul exch add 
%		sqrt 1 exch sub } def
%
%
/FMversion (4.0) def 
/FMLevel1 /languagelevel where {pop languagelevel} {1} ifelse 2 lt def
/FMPColor
	FMLevel1 {
		false
		/colorimage where {pop pop true} if
	} {
		true
	} ifelse
def
/FrameDict 400 dict def 
systemdict /errordict known not {/errordict 10 dict def
		errordict /rangecheck {stop} put} if
% The readline in PS 23.0 doesn't recognize cr's as nl's on AppleTalk
FrameDict /tmprangecheck errordict /rangecheck get put 
errordict /rangecheck {FrameDict /bug true put} put 
FrameDict /bug false put 
mark 
% Some PS machines read past the CR, so keep the following 3 lines together!
currentfile 5 string readline
00
0000000000
cleartomark 
errordict /rangecheck FrameDict /tmprangecheck get put 
FrameDict /bug get { 
	/readline {
		/gstring exch def
		/gfile exch def
		/gindex 0 def
		{
			gfile read pop 
			dup 10 eq {exit} if 
			dup 13 eq {exit} if 
			gstring exch gindex exch put 
			/gindex gindex 1 add def 
		} loop
		pop 
		gstring 0 gindex getinterval true 
		} bind def
	} if
/FMshowpage /showpage load def
/FMquit /quit load def
/FMFAILURE { 
	dup = flush 
	FMshowpage 
	/Helvetica findfont 12 scalefont setfont
	72 200 moveto
	show FMshowpage 
	FMquit 
	} def 
/FMVERSION {
	FMversion ne {
		(Frame product version does not match ps_prolog!) FMFAILURE
		} if
	} def 
/FMBADEPSF { 
	(PostScript Lang. Ref. Man., 2nd Ed., H.2.4 says EPS must not call X              )
	dup dup (X) search pop exch pop exch pop length 
	4 -1 roll 
	putinterval 
	FMFAILURE
	} def
/FMLOCAL {
	FrameDict begin
	0 def 
	end 
	} def 
/concatprocs
	{
	/proc2 exch cvlit def/proc1 exch cvlit def/newproc proc1 length proc2 length add array def
	newproc 0 proc1 putinterval newproc proc1 length proc2 putinterval newproc cvx
}def
FrameDict begin 
/FMnone 0 def
/FMcyan 1 def
/FMmagenta 2 def
/FMyellow 3 def
/FMblack 4 def
/FMcustom 5 def
/FrameNegative false def 
/FrameSepIs FMnone def 
/FrameSepBlack 0 def
/FrameSepYellow 0 def
/FrameSepMagenta 0 def
/FrameSepCyan 0 def
/FrameSepRed 1 def
/FrameSepGreen 1 def
/FrameSepBlue 1 def
/FrameCurGray 1 def
/FrameCurPat null def
/FrameCurColors [ 0 0 0 1 0 0 0 ] def 
/FrameColorEpsilon .001 def	
/eqepsilon {		
	sub dup 0 lt {neg} if
	FrameColorEpsilon le
} bind def
/FrameCmpColorsCMYK { 
	2 copy 0 get exch 0 get eqepsilon {
		2 copy 1 get exch 1 get eqepsilon {
			2 copy 2 get exch 2 get eqepsilon {
				3 get exch 3 get eqepsilon
			} {pop pop false} ifelse
		}{pop pop false} ifelse
	} {pop pop false} ifelse
} bind def
/FrameCmpColorsRGB { 
	2 copy 4 get exch 0 get eqepsilon {
		2 copy 5 get exch 1 get eqepsilon {
			6 get exch 2 get eqepsilon
		}{pop pop false} ifelse
	} {pop pop false} ifelse
} bind def
/RGBtoCMYK { 
	1 exch sub 
	3 1 roll 
	1 exch sub 
	3 1 roll 
	1 exch sub 
	3 1 roll 
	3 copy 
	2 copy 
	le { pop } { exch pop } ifelse 
	2 copy 
	le { pop } { exch pop } ifelse 
	dup dup dup 
	6 1 roll 
	4 1 roll 
	7 1 roll 
	sub 
	6 1 roll 
	sub 
	5 1 roll 
	sub 
	4 1 roll 
} bind def
/CMYKtoRGB { 
	dup dup 4 -1 roll add 						  
	5 1 roll 3 -1 roll add 						  
	4 1 roll add 								  
	1 exch sub dup 0 lt {pop 0} if 3 1 roll 	  
	1 exch sub dup 0 lt {pop 0} if exch 	      
	1 exch sub dup 0 lt {pop 0} if exch	  		  
} bind def
/FrameSepInit {
	1.0 RealSetgray
} bind def
/FrameSetSepColor { 
	/FrameSepBlue exch def
	/FrameSepGreen exch def
	/FrameSepRed exch def
	/FrameSepBlack exch def
	/FrameSepYellow exch def
	/FrameSepMagenta exch def
	/FrameSepCyan exch def
	/FrameSepIs FMcustom def
	setCurrentScreen	
} bind def
/FrameSetCyan {
	/FrameSepBlue 1.0 def
	/FrameSepGreen 1.0 def
	/FrameSepRed 0.0 def
	/FrameSepBlack 0.0 def
	/FrameSepYellow 0.0 def
	/FrameSepMagenta 0.0 def
	/FrameSepCyan 1.0 def
	/FrameSepIs FMcyan def
	setCurrentScreen	
} bind def
 
/FrameSetMagenta {
	/FrameSepBlue 1.0 def
	/FrameSepGreen 0.0 def
	/FrameSepRed 1.0 def
	/FrameSepBlack 0.0 def
	/FrameSepYellow 0.0 def
	/FrameSepMagenta 1.0 def
	/FrameSepCyan 0.0 def
	/FrameSepIs FMmagenta def
	setCurrentScreen
} bind def
 
/FrameSetYellow {
	/FrameSepBlue 0.0 def
	/FrameSepGreen 1.0 def
	/FrameSepRed 1.0 def
	/FrameSepBlack 0.0 def
	/FrameSepYellow 1.0 def
	/FrameSepMagenta 0.0 def
	/FrameSepCyan 0.0 def
	/FrameSepIs FMyellow def
	setCurrentScreen
} bind def
 
/FrameSetBlack {
	/FrameSepBlue 0.0 def
	/FrameSepGreen 0.0 def
	/FrameSepRed 0.0 def
	/FrameSepBlack 1.0 def
	/FrameSepYellow 0.0 def
	/FrameSepMagenta 0.0 def
	/FrameSepCyan 0.0 def
	/FrameSepIs FMblack def
	setCurrentScreen
} bind def
 
/FrameNoSep { 
	/FrameSepIs FMnone def
	setCurrentScreen
} bind def
/FrameSetSepColors { 
	FrameDict begin
	[ exch 1 add 1 roll ]
	/FrameSepColors  
	exch def end
	} bind def
/FrameColorInSepListCMYK { 
	FrameSepColors {  
       		exch dup 3 -1 roll 
       		FrameCmpColorsCMYK 
       		{ pop true exit } if
    	} forall 
	dup true ne {pop false} if
	} bind def
/FrameColorInSepListRGB { 
	FrameSepColors {  
       		exch dup 3 -1 roll 
       		FrameCmpColorsRGB 
       		{ pop true exit } if
    	} forall 
	dup true ne {pop false} if
	} bind def
/RealSetgray /setgray load def
/RealSetrgbcolor /setrgbcolor load def
/RealSethsbcolor /sethsbcolor load def
end 
/setgray { 
	FrameDict begin
	FrameSepIs FMnone eq
		{ RealSetgray } 
		{ 
		FrameSepIs FMblack eq 
			{ RealSetgray } 
			{ FrameSepIs FMcustom eq 
			  FrameSepRed 0 eq and
			  FrameSepGreen 0 eq and
			  FrameSepBlue 0 eq and {
			  	RealSetgray
			  } {
				1 RealSetgray pop 
			  } ifelse
			} ifelse
		} ifelse
	end
} bind def
/setrgbcolor { 
	FrameDict begin
	FrameSepIs FMnone eq
	{  RealSetrgbcolor }
	{
		3 copy [ 4 1 roll ] 
		FrameColorInSepListRGB
		{
				FrameSepBlue eq exch 
			 	FrameSepGreen eq and exch 
			 	FrameSepRed eq and
			 	{ 0 } { 1 } ifelse
		}
		{
			FMPColor {
				RealSetrgbcolor
				currentcmykcolor
			} {
				RGBtoCMYK
			} ifelse
			FrameSepIs FMblack eq
			{1.0 exch sub 4 1 roll pop pop pop} {
			FrameSepIs FMyellow eq
			{pop 1.0 exch sub 3 1 roll pop pop} {
			FrameSepIs FMmagenta eq
			{pop pop 1.0 exch sub exch pop } {
			FrameSepIs FMcyan eq
			{pop pop pop 1.0 exch sub } 
			{pop pop pop pop 1} ifelse } ifelse } ifelse } ifelse 
		} ifelse
		RealSetgray
	} 
	ifelse
	end
} bind def
/sethsbcolor {
	FrameDict begin
	FrameSepIs FMnone eq 
	{ RealSethsbcolor } 
	{
		RealSethsbcolor 
		currentrgbcolor  
		setrgbcolor 
	} 
	ifelse
	end
} bind def
FrameDict begin
/setcmykcolor where {
	pop /RealSetcmykcolor /setcmykcolor load def
} {
	/RealSetcmykcolor {
		4 1 roll
		3 { 3 index add 0 max 1 min 1 exch sub 3 1 roll} repeat 
		setrgbcolor pop
	} bind def
} ifelse
userdict /setcmykcolor { 
		FrameDict begin
		FrameSepIs FMnone eq
		{ RealSetcmykcolor } 
		{
			4 copy [ 5 1 roll ]
			FrameColorInSepListCMYK
			{
				FrameSepBlack eq exch 
				FrameSepYellow eq and exch 
				FrameSepMagenta eq and exch 
				FrameSepCyan eq and 
				{ 0 } { 1 } ifelse
			}
			{
				FrameSepIs FMblack eq
				{1.0 exch sub 4 1 roll pop pop pop} {
				FrameSepIs FMyellow eq
				{pop 1.0 exch sub 3 1 roll pop pop} {
				FrameSepIs FMmagenta eq
				{pop pop 1.0 exch sub exch pop } {
				FrameSepIs FMcyan eq
				{pop pop pop 1.0 exch sub } 
				{pop pop pop pop 1} ifelse } ifelse } ifelse } ifelse 
			} ifelse
			RealSetgray
		}
		ifelse
		end
	} bind put
FMLevel1 not { 
	
	/patProcDict 5 dict dup begin
		<0f1e3c78f0e1c387> { 3 setlinewidth -1 -1 moveto 9 9 lineto stroke 
											4 -4 moveto 12 4 lineto stroke
											-4 4 moveto 4 12 lineto stroke} bind def
		<0f87c3e1f0783c1e> { 3 setlinewidth -1 9 moveto 9 -1 lineto stroke 
											-4 4 moveto 4 -4 lineto stroke
											4 12 moveto 12 4 lineto stroke} bind def
		<8142241818244281> { 1 setlinewidth -1 9 moveto 9 -1 lineto stroke
											-1 -1 moveto 9 9 lineto stroke } bind def
		<03060c183060c081> { 1 setlinewidth -1 -1 moveto 9 9 lineto stroke 
											4 -4 moveto 12 4 lineto stroke
											-4 4 moveto 4 12 lineto stroke} bind def
		<8040201008040201> { 1 setlinewidth -1 9 moveto 9 -1 lineto stroke 
											-4 4 moveto 4 -4 lineto stroke
											4 12 moveto 12 4 lineto stroke} bind def
	end def
	/patDict 15 dict dup begin
		/PatternType 1 def		
		/PaintType 2 def		
		/TilingType 3 def		
		/BBox [ 0 0 8 8 ] def 	
		/XStep 8 def			
		/YStep 8 def			
		/PaintProc {
			begin
			patProcDict bstring known {
				patProcDict bstring get exec
			} {
				8 8 true [1 0 0 -1 0 8] bstring imagemask
			} ifelse
			end
		} bind def
	end def
} if
/combineColor {
    FrameSepIs FMnone eq
	{
		graymode FMLevel1 or not {
			
			[/Pattern [/DeviceCMYK]] setcolorspace
			FrameCurColors 0 4 getinterval aload pop FrameCurPat setcolor
		} {
			FrameCurColors 3 get 1.0 ge {
				FrameCurGray RealSetgray
			} {
				FMPColor graymode and {
					0 1 3 { 
						FrameCurColors exch get
						1 FrameCurGray sub mul
					} for
					RealSetcmykcolor
				} {
					4 1 6 {
						FrameCurColors exch get
						graymode {
							1 exch sub 1 FrameCurGray sub mul 1 exch sub
						} {
							1.0 lt {FrameCurGray} {1} ifelse
						} ifelse
					} for
					RealSetrgbcolor
				} ifelse
			} ifelse
		} ifelse
	} { 
		FrameCurColors 0 4 getinterval aload
		FrameColorInSepListCMYK {
			FrameSepBlack eq exch 
			FrameSepYellow eq and exch 
			FrameSepMagenta eq and exch 
			FrameSepCyan eq and
			FrameSepIs FMcustom eq and
			{ FrameCurGray } { 1 } ifelse
		} {
			FrameSepIs FMblack eq
			{FrameCurGray 1.0 exch sub mul 1.0 exch sub 4 1 roll pop pop pop} {
			FrameSepIs FMyellow eq
			{pop FrameCurGray 1.0 exch sub mul 1.0 exch sub 3 1 roll pop pop} {
			FrameSepIs FMmagenta eq
			{pop pop FrameCurGray 1.0 exch sub mul 1.0 exch sub exch pop } {
			FrameSepIs FMcyan eq
			{pop pop pop FrameCurGray 1.0 exch sub mul 1.0 exch sub } 
			{pop pop pop pop 1} ifelse } ifelse } ifelse } ifelse 
		} ifelse
		graymode FMLevel1 or not {
			
			[/Pattern [/DeviceGray]] setcolorspace
			FrameCurPat setcolor
		} { 
			graymode not FMLevel1 and {
				
				dup 1 lt {pop FrameCurGray} if
			} if
			RealSetgray
		} ifelse
	} ifelse
} bind def
/savematrix {
	orgmatrix currentmatrix pop
	} bind def
/restorematrix {
	orgmatrix setmatrix
	} bind def
/dmatrix matrix def
/dpi    72 0 dmatrix defaultmatrix dtransform
    dup mul exch   dup mul add   sqrt def
	
/freq dpi dup 72 div round dup 0 eq {pop 1} if 8 mul div def
/sangle 1 0 dmatrix defaultmatrix dtransform exch atan def
/dpiranges   [  2540    2400    1693     1270    1200     635      600      0      ] def
/CMLowFreqs  [ 100.402  94.8683 89.2289 100.402  94.8683  66.9349  63.2456 47.4342 ] def
/YLowFreqs   [  95.25   90.0    84.65    95.25   90.0     70.5556  66.6667 50.0    ] def
/KLowFreqs   [  89.8026 84.8528 79.8088  89.8026 84.8528  74.8355  70.7107 53.033  ] def
/CLowAngles  [  71.5651 71.5651 71.5651 71.5651  71.5651  71.5651  71.5651 71.5651 ] def
/MLowAngles  [  18.4349 18.4349 18.4349 18.4349  18.4349  18.4349  18.4349 18.4349 ] def
/YLowTDot    [  true    true    false    true    true     false    false   false   ] def
/CMHighFreqs [ 133.87  126.491 133.843  108.503 102.523  100.402   94.8683 63.2456 ] def
/YHighFreqs  [ 127.0   120.0   126.975  115.455 109.091   95.25    90.0    60.0    ] def
/KHighFreqs  [ 119.737 113.137 119.713  128.289 121.218   89.8026  84.8528 63.6395 ] def
/CHighAngles [  71.5651 71.5651 71.5651  70.0169 70.0169  71.5651  71.5651 71.5651 ] def
/MHighAngles [  18.4349 18.4349 18.4349  19.9831 19.9831  18.4349  18.4349 18.4349 ] def
/YHighTDot   [  false   false   true     false   false    true     true    false   ] def
/PatFreq     [	10.5833 10.0     9.4055  10.5833 10.0	  10.5833  10.0	   9.375   ] def
/screenIndex {
	0 1 dpiranges length 1 sub { dup dpiranges exch get 1 sub dpi le {exit} {pop} ifelse } for
} bind def
/getCyanScreen {
	FMUseHighFrequencyScreens { CHighAngles CMHighFreqs} {CLowAngles CMLowFreqs} ifelse
		screenIndex dup 3 1 roll get 3 1 roll get /FMSpotFunction load
} bind def
/getMagentaScreen {
	FMUseHighFrequencyScreens { MHighAngles CMHighFreqs } {MLowAngles CMLowFreqs} ifelse
		screenIndex dup 3 1 roll get 3 1 roll get /FMSpotFunction load
} bind def
/getYellowScreen {
	FMUseHighFrequencyScreens { YHighTDot YHighFreqs} { YLowTDot YLowFreqs } ifelse
		screenIndex dup 3 1 roll get 3 1 roll get { 3 div
			{2 { 1 add 2 div 3 mul dup floor sub 2 mul 1 sub exch} repeat
			FMSpotFunction } } {/FMSpotFunction load } ifelse
			0.0 exch
} bind def
/getBlackScreen  {
	FMUseHighFrequencyScreens { KHighFreqs } { KLowFreqs } ifelse
		screenIndex get 45.0 /FMSpotFunction load 
} bind def
/getSpotScreen {
	getBlackScreen
} bind def
/getCompositeScreen {
	getBlackScreen
} bind def
/FMSetScreen 
	FMLevel1 { /setscreen load 
	}{ {
		8 dict begin
		/HalftoneType 1 def
		/SpotFunction exch def
		/Angle exch def
		/Frequency exch def
		/AccurateScreens FMUseAcccurateScreens def
		currentdict end sethalftone
	} bind } ifelse
def
/setDefaultScreen {
	FMPColor {
		orgrxfer cvx orggxfer cvx orgbxfer cvx orgxfer cvx setcolortransfer
	}
	{
		orgxfer cvx settransfer
	} ifelse
	orgfreq organgle orgproc cvx setscreen
} bind def
/setCurrentScreen {
	FrameSepIs FMnone eq {
		FMUseDefaultNoSeparationScreen {
			setDefaultScreen
		} {
			getCompositeScreen FMSetScreen
		} ifelse
	} {
		FrameSepIs FMcustom eq {
			FMUseDefaultSpotSeparationScreen {
				setDefaultScreen
			} {
				getSpotScreen FMSetScreen
			} ifelse
		} {
			FMUseDefaultProcessSeparationScreen {
				setDefaultScreen
			} {
				FrameSepIs FMcyan eq {
					getCyanScreen FMSetScreen
				} {
					FrameSepIs FMmagenta eq {
						getMagentaScreen FMSetScreen
					} {
						FrameSepIs FMyellow eq {
							getYellowScreen FMSetScreen
						} {
							getBlackScreen FMSetScreen
						} ifelse
					} ifelse
				} ifelse
			} ifelse
		} ifelse
	} ifelse 
} bind def
end
	/gstring FMLOCAL
	/gfile FMLOCAL
	/gindex FMLOCAL
	/orgrxfer FMLOCAL
	/orggxfer FMLOCAL
	/orgbxfer FMLOCAL
	/orgxfer FMLOCAL
	/orgproc FMLOCAL
	/orgrproc FMLOCAL
	/orggproc FMLOCAL
	/orgbproc FMLOCAL
	/organgle FMLOCAL
	/orgrangle FMLOCAL
	/orggangle FMLOCAL
	/orgbangle FMLOCAL
	/orgfreq FMLOCAL
	/orgrfreq FMLOCAL
	/orggfreq FMLOCAL
	/orgbfreq FMLOCAL
	/yscale FMLOCAL
	/xscale FMLOCAL
	/edown FMLOCAL
	/manualfeed FMLOCAL
	/paperheight FMLOCAL
	/paperwidth FMLOCAL
/FMDOCUMENT { 
	array /FMfonts exch def 
	/#copies exch def
	FrameDict begin
	0 ne /manualfeed exch def
	/paperheight exch def
	/paperwidth exch def
	0 ne /FrameNegative exch def 
	0 ne /edown exch def 
	/yscale exch def
	/xscale exch def
	FMLevel1 {
		manualfeed {setmanualfeed} if
		/FMdicttop countdictstack 1 add def 
		/FMoptop count def 
		setpapername 
		manualfeed {true} {papersize} ifelse 
		{manualpapersize} {false} ifelse 
		{desperatepapersize} {false} ifelse 
		{ (Can't select requested paper size for Frame print job!) FMFAILURE } if
		count -1 FMoptop {pop pop} for
		countdictstack -1 FMdicttop {pop end} for 
		}
		{{1 dict dup /PageSize [paperwidth paperheight]put setpagedevice}stopped
		{ (Can't select requested paper size for Frame print job!) FMFAILURE } if
		 {1 dict dup /ManualFeed manualfeed put setpagedevice } stopped pop }
	ifelse 
	
	FMPColor {
		currentcolorscreen
			cvlit /orgproc exch def
				  /organgle exch def 
				  /orgfreq exch def
			cvlit /orgbproc exch def
				  /orgbangle exch def 
				  /orgbfreq exch def
			cvlit /orggproc exch def
				  /orggangle exch def 
				  /orggfreq exch def
			cvlit /orgrproc exch def
				  /orgrangle exch def 
				  /orgrfreq exch def
			currentcolortransfer 
			FrameNegative {
				1 1 4 { 
					pop { 1 exch sub } concatprocs 4 1 roll
				} for
				4 copy
				setcolortransfer
			} if
			cvlit /orgxfer exch def
			cvlit /orgbxfer exch def
			cvlit /orggxfer exch def
			cvlit /orgrxfer exch def
	} {
		currentscreen 
			cvlit /orgproc exch def
				  /organgle exch def 
				  /orgfreq exch def
				  
		currenttransfer 
		FrameNegative {
			{ 1 exch sub } concatprocs
			dup settransfer
		} if 
		cvlit /orgxfer exch def
	} ifelse
	end 
} def 
/pagesave FMLOCAL
/orgmatrix FMLOCAL
/landscape FMLOCAL
/pwid FMLOCAL
/FMBEGINPAGE { 
	FrameDict begin 
	/pagesave save def
	3.86 setmiterlimit
	/landscape exch 0 ne def
	landscape { 
		90 rotate 0 exch dup /pwid exch def neg translate pop 
	}{
		pop /pwid exch def
	} ifelse
	edown { [-1 0 0 1 pwid 0] concat } if
	0 0 moveto paperwidth 0 lineto paperwidth paperheight lineto 
	0 paperheight lineto 0 0 lineto 1 setgray fill
	xscale yscale scale
	/orgmatrix matrix def
	gsave 
} def 
/FMENDPAGE {
	grestore 
	pagesave restore
	end 
	showpage
	} def 
/FMFONTDEFINE { 
	FrameDict begin
	findfont 
	ReEncode 
	1 index exch 
	definefont 
	FMfonts 3 1 roll 
	put
	end 
	} def 
/FMFILLS {
	FrameDict begin dup
	array /fillvals exch def
	dict /patCache exch def
	end 
	} def 
/FMFILL {
	FrameDict begin
	 fillvals 3 1 roll put
	end 
	} def 
/FMNORMALIZEGRAPHICS { 
	newpath
	0.0 0.0 moveto
	1 setlinewidth
	0 setlinecap
	0 0 0 sethsbcolor
	0 setgray 
	} bind def
	/fx FMLOCAL
	/fy FMLOCAL
	/fh FMLOCAL
	/fw FMLOCAL
	/llx FMLOCAL
	/lly FMLOCAL
	/urx FMLOCAL
	/ury FMLOCAL
/FMBEGINEPSF { 
	end 
	/FMEPSF save def 
	/showpage {} def 
% See Adobe's "PostScript Language Reference Manual, 2nd Edition", page 714.
% "...the following operators MUST NOT be used in an EPS file:" (emphasis ours)
	/banddevice {(banddevice) FMBADEPSF} def
	/clear {(clear) FMBADEPSF} def
	/cleardictstack {(cleardictstack) FMBADEPSF} def 
	/copypage {(copypage) FMBADEPSF} def
	/erasepage {(erasepage) FMBADEPSF} def
	/exitserver {(exitserver) FMBADEPSF} def
	/framedevice {(framedevice) FMBADEPSF} def
	/grestoreall {(grestoreall) FMBADEPSF} def
	/initclip {(initclip) FMBADEPSF} def
	/initgraphics {(initgraphics) FMBADEPSF} def
	/initmatrix {(initmatrix) FMBADEPSF} def
	/quit {(quit) FMBADEPSF} def
	/renderbands {(renderbands) FMBADEPSF} def
	/setglobal {(setglobal) FMBADEPSF} def
	/setpagedevice {(setpagedevice) FMBADEPSF} def
	/setshared {(setshared) FMBADEPSF} def
	/startjob {(startjob) FMBADEPSF} def
	/lettertray {(lettertray) FMBADEPSF} def
	/letter {(letter) FMBADEPSF} def
	/lettersmall {(lettersmall) FMBADEPSF} def
	/11x17tray {(11x17tray) FMBADEPSF} def
	/11x17 {(11x17) FMBADEPSF} def
	/ledgertray {(ledgertray) FMBADEPSF} def
	/ledger {(ledger) FMBADEPSF} def
	/legaltray {(legaltray) FMBADEPSF} def
	/legal {(legal) FMBADEPSF} def
	/statementtray {(statementtray) FMBADEPSF} def
	/statement {(statement) FMBADEPSF} def
	/executivetray {(executivetray) FMBADEPSF} def
	/executive {(executive) FMBADEPSF} def
	/a3tray {(a3tray) FMBADEPSF} def
	/a3 {(a3) FMBADEPSF} def
	/a4tray {(a4tray) FMBADEPSF} def
	/a4 {(a4) FMBADEPSF} def
	/a4small {(a4small) FMBADEPSF} def
	/b4tray {(b4tray) FMBADEPSF} def
	/b4 {(b4) FMBADEPSF} def
	/b5tray {(b5tray) FMBADEPSF} def
	/b5 {(b5) FMBADEPSF} def
	FMNORMALIZEGRAPHICS 
	[/fy /fx /fh /fw /ury /urx /lly /llx] {exch def} forall 
	fx fw 2 div add fy fh 2 div add  translate
	rotate
	fw 2 div neg fh 2 div neg translate
	fw urx llx sub div fh ury lly sub div scale 
	llx neg lly neg translate 
	/FMdicttop countdictstack 1 add def 
	/FMoptop count def 
	} bind def
/FMENDEPSF {
	count -1 FMoptop {pop pop} for 
	countdictstack -1 FMdicttop {pop end} for 
	FMEPSF restore
	FrameDict begin 
	} bind def
FrameDict begin 
/setmanualfeed {
%%BeginFeature *ManualFeed True
	 statusdict /manualfeed true put
%%EndFeature
	} bind def
/max {2 copy lt {exch} if pop} bind def
/min {2 copy gt {exch} if pop} bind def
/inch {72 mul} def
/pagedimen { 
	paperheight sub abs 16 lt exch 
	paperwidth sub abs 16 lt and
	{/papername exch def} {pop} ifelse
	} bind def
	/papersizedict FMLOCAL
/setpapername { 
	/papersizedict 14 dict def 
	papersizedict begin
	/papername /unknown def 
		/Letter 8.5 inch 11.0 inch pagedimen
		/LetterSmall 7.68 inch 10.16 inch pagedimen
		/Tabloid 11.0 inch 17.0 inch pagedimen
		/Ledger 17.0 inch 11.0 inch pagedimen
		/Legal 8.5 inch 14.0 inch pagedimen
		/Statement 5.5 inch 8.5 inch pagedimen
		/Executive 7.5 inch 10.0 inch pagedimen
		/A3 11.69 inch 16.5 inch pagedimen
		/A4 8.26 inch 11.69 inch pagedimen
		/A4Small 7.47 inch 10.85 inch pagedimen
		/B4 10.125 inch 14.33 inch pagedimen
		/B5 7.16 inch 10.125 inch pagedimen
	end
	} bind def
/papersize {
	papersizedict begin
		/Letter {lettertray letter} def
		/LetterSmall {lettertray lettersmall} def
		/Tabloid {11x17tray 11x17} def
		/Ledger {ledgertray ledger} def
		/Legal {legaltray legal} def
		/Statement {statementtray statement} def
		/Executive {executivetray executive} def
		/A3 {a3tray a3} def
		/A4 {a4tray a4} def
		/A4Small {a4tray a4small} def
		/B4 {b4tray b4} def
		/B5 {b5tray b5} def
		/unknown {unknown} def
	papersizedict dup papername known {papername} {/unknown} ifelse get
	end
	statusdict begin stopped end 
	} bind def
/manualpapersize {
	papersizedict begin
		/Letter {letter} def
		/LetterSmall {lettersmall} def
		/Tabloid {11x17} def
		/Ledger {ledger} def
		/Legal {legal} def
		/Statement {statement} def
		/Executive {executive} def
		/A3 {a3} def
		/A4 {a4} def
		/A4Small {a4small} def
		/B4 {b4} def
		/B5 {b5} def
		/unknown {unknown} def
	papersizedict dup papername known {papername} {/unknown} ifelse get
	end
	stopped 
	} bind def
/desperatepapersize {
	statusdict /setpageparams known
		{
		paperwidth paperheight 0 1 
		statusdict begin
		{setpageparams} stopped 
		end
		} {true} ifelse 
	} bind def
/DiacriticEncoding [
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/.notdef /.notdef /.notdef /.notdef /space /exclam /quotedbl
/numbersign /dollar /percent /ampersand /quotesingle /parenleft
/parenright /asterisk /plus /comma /hyphen /period /slash /zero /one
/two /three /four /five /six /seven /eight /nine /colon /semicolon
/less /equal /greater /question /at /A /B /C /D /E /F /G /H /I /J /K
/L /M /N /O /P /Q /R /S /T /U /V /W /X /Y /Z /bracketleft /backslash
/bracketright /asciicircum /underscore /grave /a /b /c /d /e /f /g /h
/i /j /k /l /m /n /o /p /q /r /s /t /u /v /w /x /y /z /braceleft /bar
/braceright /asciitilde /.notdef /Adieresis /Aring /Ccedilla /Eacute
/Ntilde /Odieresis /Udieresis /aacute /agrave /acircumflex /adieresis
/atilde /aring /ccedilla /eacute /egrave /ecircumflex /edieresis
/iacute /igrave /icircumflex /idieresis /ntilde /oacute /ograve
/ocircumflex /odieresis /otilde /uacute /ugrave /ucircumflex
/udieresis /dagger /.notdef /cent /sterling /section /bullet
/paragraph /germandbls /registered /copyright /trademark /acute
/dieresis /.notdef /AE /Oslash /.notdef /.notdef /.notdef /.notdef
/yen /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
/ordfeminine /ordmasculine /.notdef /ae /oslash /questiondown
/exclamdown /logicalnot /.notdef /florin /.notdef /.notdef
/guillemotleft /guillemotright /ellipsis /.notdef /Agrave /Atilde
/Otilde /OE /oe /endash /emdash /quotedblleft /quotedblright
/quoteleft /quoteright /.notdef /.notdef /ydieresis /Ydieresis
/fraction /currency /guilsinglleft /guilsinglright /fi /fl /daggerdbl
/periodcentered /quotesinglbase /quotedblbase /perthousand
/Acircumflex /Ecircumflex /Aacute /Edieresis /Egrave /Iacute
/Icircumflex /Idieresis /Igrave /Oacute /Ocircumflex /.notdef /Ograve
/Uacute /Ucircumflex /Ugrave /dotlessi /circumflex /tilde /macron
/breve /dotaccent /ring /cedilla /hungarumlaut /ogonek /caron
] def
/ReEncode { 
	dup 
	length 
	dict begin 
	{
	1 index /FID ne 
		{def} 
		{pop pop} ifelse 
	} forall 
	0 eq {/Encoding DiacriticEncoding def} if 
	currentdict 
	end 
	} bind def
FMPColor 
	
	{
	/BEGINBITMAPCOLOR { 
		BITMAPCOLOR} def
	/BEGINBITMAPCOLORc { 
		BITMAPCOLORc} def
	/BEGINBITMAPTRUECOLOR { 
		BITMAPTRUECOLOR } def
	/BEGINBITMAPTRUECOLORc { 
		BITMAPTRUECOLORc } def
	}
	
	{
	/BEGINBITMAPCOLOR { 
		BITMAPGRAY} def
	/BEGINBITMAPCOLORc { 
		BITMAPGRAYc} def
	/BEGINBITMAPTRUECOLOR { 
		BITMAPTRUEGRAY } def
	/BEGINBITMAPTRUECOLORc { 
		BITMAPTRUEGRAYc } def
	}
ifelse
/K { 
	FMPrintAllColorsAsBlack {
		dup 1 eq 2 index 1 eq and 3 index 1 eq and not
			{7 {pop} repeat 0 0 0 1 0 0 0} if
	} if 
	FrameCurColors astore 
	pop combineColor
} bind def
/graymode true def
	/bwidth FMLOCAL
	/bpside FMLOCAL
	/bstring FMLOCAL
	/onbits FMLOCAL
	/offbits FMLOCAL
	/xindex FMLOCAL
	/yindex FMLOCAL
	/x FMLOCAL
	/y FMLOCAL
/setPatternMode {
	FMLevel1 {
		/bwidth  exch def
		/bpside  exch def
		/bstring exch def
		/onbits 0 def  /offbits 0 def
		freq sangle landscape {90 add} if 
			{/y exch def
			 /x exch def
			 /xindex x 1 add 2 div bpside mul cvi def
			 /yindex y 1 add 2 div bpside mul cvi def
			 bstring yindex bwidth mul xindex 8 idiv add get
			 1 7 xindex 8 mod sub bitshift and 0 ne FrameNegative {not} if
			 {/onbits  onbits  1 add def 1}
			 {/offbits offbits 1 add def 0}
			 ifelse
			}
			setscreen
		offbits offbits onbits add div FrameNegative {1.0 exch sub} if
		/FrameCurGray exch def
	} { 
		pop pop
		dup patCache exch known {
			patCache exch get
		} { 
			dup
			patDict /bstring 3 -1 roll put
			patDict 
			9 PatFreq screenIndex get div dup matrix scale
			makepattern
			dup 
			patCache 4 -1 roll 3 -1 roll put
		} ifelse
		/FrameCurGray 0 def
		/FrameCurPat exch def
	} ifelse
	/graymode false def
	combineColor
} bind def
/setGrayScaleMode {
	graymode not {
		/graymode true def
		FMLevel1 {
			setCurrentScreen
		} if
	} if
	/FrameCurGray exch def
	combineColor
} bind def
/normalize {
	transform round exch round exch itransform
	} bind def
/dnormalize {
	dtransform round exch round exch idtransform
	} bind def
/lnormalize { 
	0 dtransform exch cvi 2 idiv 2 mul 1 add exch idtransform pop
	} bind def
/H { 
	lnormalize setlinewidth
	} bind def
/Z {
	setlinecap
	} bind def
	
/PFill {
	graymode FMLevel1 or not {
		gsave 1 setgray eofill grestore
	} if
} bind def
/PStroke {
	graymode FMLevel1 or not {
		gsave 1 setgray stroke grestore
	} if
	stroke
} bind def
	/fillvals FMLOCAL
/X { 
	fillvals exch get
	dup type /stringtype eq
	{8 1 setPatternMode} 
	{setGrayScaleMode}
	ifelse
	} bind def
/V { 
	PFill gsave eofill grestore
	} bind def
/Vclip {
	clip
	} bind def
/Vstrk {
	currentlinewidth exch setlinewidth PStroke setlinewidth
	} bind def
/N { 
	PStroke
	} bind def
/Nclip {
	strokepath clip newpath
	} bind def
/Nstrk {
	currentlinewidth exch setlinewidth PStroke setlinewidth
	} bind def
/M {newpath moveto} bind def
/E {lineto} bind def
/D {curveto} bind def
/O {closepath} bind def
	/n FMLOCAL
/L { 
 	/n exch def
	newpath
	normalize
	moveto 
	2 1 n {pop normalize lineto} for
	} bind def
/Y { 
	L 
	closepath
	} bind def
	/x1 FMLOCAL
	/x2 FMLOCAL
	/y1 FMLOCAL
	/y2 FMLOCAL
/R { 
	/y2 exch def
	/x2 exch def
	/y1 exch def
	/x1 exch def
	x1 y1
	x2 y1
	x2 y2
	x1 y2
	4 Y 
	} bind def
	/rad FMLOCAL
/rarc 
	{rad 
	 arcto
	} bind def
/RR { 
	/rad exch def
	normalize
	/y2 exch def
	/x2 exch def
	normalize
	/y1 exch def
	/x1 exch def
	mark
	newpath
	{
	x1 y1 rad add moveto
	x1 y2 x2 y2 rarc
	x2 y2 x2 y1 rarc
	x2 y1 x1 y1 rarc
	x1 y1 x1 y2 rarc
	closepath
	} stopped {x1 y1 x2 y2 R} if 
	cleartomark
	} bind def
/RRR { 
	/rad exch def
	normalize /y4 exch def /x4 exch def
	normalize /y3 exch def /x3 exch def
	normalize /y2 exch def /x2 exch def
	normalize /y1 exch def /x1 exch def
	newpath
	normalize moveto 
	mark
	{
	x2 y2 x3 y3 rarc
	x3 y3 x4 y4 rarc
	x4 y4 x1 y1 rarc
	x1 y1 x2 y2 rarc
	closepath
	} stopped
	 {x1 y1 x2 y2 x3 y3 x4 y4 newpath moveto lineto lineto lineto closepath} if
	cleartomark
	} bind def
/C { 
	grestore
	gsave
	R 
	clip
	setCurrentScreen
} bind def
/CP { 
	grestore
	gsave
	Y 
	clip
	setCurrentScreen
} bind def
	/FMpointsize FMLOCAL
/F { 
	FMfonts exch get
	FMpointsize scalefont
	setfont
	} bind def
/Q { 
	/FMpointsize exch def
	F 
	} bind def
/T { 
	moveto show
	} bind def
/RF { 
	rotate
	0 ne {-1 1 scale} if
	} bind def
/TF { 
	gsave
	moveto 
	RF
	show
	grestore
	} bind def
/P { 
	moveto
	0 32 3 2 roll widthshow
	} bind def
/PF { 
	gsave
	moveto 
	RF
	0 32 3 2 roll widthshow
	grestore
	} bind def
/S { 
	moveto
	0 exch ashow
	} bind def
/SF { 
	gsave
	moveto
	RF
	0 exch ashow
	grestore
	} bind def
/B { 
	moveto
	0 32 4 2 roll 0 exch awidthshow
	} bind def
/BF { 
	gsave
	moveto
	RF
	0 32 4 2 roll 0 exch awidthshow
	grestore
	} bind def
/G { 
	gsave
	newpath
	normalize translate 0.0 0.0 moveto 
	dnormalize scale 
	0.0 0.0 1.0 5 3 roll arc 
	closepath 
	PFill fill
	grestore
	} bind def
/Gstrk {
	savematrix
    newpath
    2 index 2 div add exch 3 index 2 div sub exch 
    normalize 2 index 2 div sub exch 3 index 2 div add exch 
    translate
    scale 
    0.0 0.0 1.0 5 3 roll arc 
    restorematrix
    currentlinewidth exch setlinewidth PStroke setlinewidth
    } bind def
/Gclip { 
	newpath
	savematrix
	normalize translate 0.0 0.0 moveto 
	dnormalize scale 
	0.0 0.0 1.0 5 3 roll arc 
	closepath 
	clip newpath
	restorematrix
	} bind def
/GG { 
	gsave
	newpath
	normalize translate 0.0 0.0 moveto 
	rotate 
	dnormalize scale 
	0.0 0.0 1.0 5 3 roll arc 
	closepath
	PFill
	fill
	grestore
	} bind def
/GGclip { 
	savematrix
	newpath
    normalize translate 0.0 0.0 moveto 
    rotate 
    dnormalize scale 
    0.0 0.0 1.0 5 3 roll arc 
    closepath
	clip newpath
	restorematrix
	} bind def
/GGstrk { 
	savematrix
    newpath
    normalize translate 0.0 0.0 moveto 
    rotate 
    dnormalize scale 
    0.0 0.0 1.0 5 3 roll arc 
    closepath 
	restorematrix
    currentlinewidth exch setlinewidth PStroke setlinewidth
	} bind def
/A { 
	gsave
	savematrix
	newpath
	2 index 2 div add exch 3 index 2 div sub exch 
	normalize 2 index 2 div sub exch 3 index 2 div add exch 
	translate 
	scale 
	0.0 0.0 1.0 5 3 roll arc 
	restorematrix
	PStroke
	grestore
	} bind def
/Aclip {
	newpath
	savematrix
	normalize translate 0.0 0.0 moveto 
	dnormalize scale 
	0.0 0.0 1.0 5 3 roll arc 
	closepath 
	strokepath clip newpath
	restorematrix
} bind def
/Astrk {
	Gstrk
} bind def
/AA { 
	gsave
	savematrix
	newpath
	
	3 index 2 div add exch 4 index 2 div sub exch 
	
	normalize 3 index 2 div sub exch 4 index 2 div add exch
	translate 
	rotate 
	scale 
	0.0 0.0 1.0 5 3 roll arc 
	restorematrix
	PStroke
	grestore
	} bind def
/AAclip {
	savematrix
	newpath
    normalize translate 0.0 0.0 moveto 
    rotate 
    dnormalize scale 
    0.0 0.0 1.0 5 3 roll arc 
    closepath
	strokepath clip newpath
	restorematrix
} bind def
/AAstrk {
	GGstrk
} bind def
	/x FMLOCAL
	/y FMLOCAL
	/w FMLOCAL
	/h FMLOCAL
	/xx FMLOCAL
	/yy FMLOCAL
	/ww FMLOCAL
	/hh FMLOCAL
	/FMsaveobject FMLOCAL
	/FMoptop FMLOCAL
	/FMdicttop FMLOCAL
/BEGINPRINTCODE { 
	/FMdicttop countdictstack 1 add def 
	/FMoptop count 7 sub def 
	/FMsaveobject save def
	userdict begin 
	/showpage {} def 
	FMNORMALIZEGRAPHICS 
	3 index neg 3 index neg translate
	} bind def
/ENDPRINTCODE {
	count -1 FMoptop {pop pop} for 
	countdictstack -1 FMdicttop {pop end} for 
	FMsaveobject restore 
	} bind def
/gn { 
	0 
	{	46 mul 
		cf read pop 
		32 sub 
		dup 46 lt {exit} if 
		46 sub add 
		} loop
	add 
	} bind def
	/str FMLOCAL
/cfs { 
	/str sl string def 
	0 1 sl 1 sub {str exch val put} for 
	str def 
	} bind def
/ic [ 
	0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0223
	0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0223
	0
	{0 hx} {1 hx} {2 hx} {3 hx} {4 hx} {5 hx} {6 hx} {7 hx} {8 hx} {9 hx}
	{10 hx} {11 hx} {12 hx} {13 hx} {14 hx} {15 hx} {16 hx} {17 hx} {18 hx}
	{19 hx} {gn hx} {0} {1} {2} {3} {4} {5} {6} {7} {8} {9} {10} {11} {12}
	{13} {14} {15} {16} {17} {18} {19} {gn} {0 wh} {1 wh} {2 wh} {3 wh}
	{4 wh} {5 wh} {6 wh} {7 wh} {8 wh} {9 wh} {10 wh} {11 wh} {12 wh}
	{13 wh} {14 wh} {gn wh} {0 bl} {1 bl} {2 bl} {3 bl} {4 bl} {5 bl} {6 bl}
	{7 bl} {8 bl} {9 bl} {10 bl} {11 bl} {12 bl} {13 bl} {14 bl} {gn bl}
	{0 fl} {1 fl} {2 fl} {3 fl} {4 fl} {5 fl} {6 fl} {7 fl} {8 fl} {9 fl}
	{10 fl} {11 fl} {12 fl} {13 fl} {14 fl} {gn fl}
	] def
	/sl FMLOCAL
	/val FMLOCAL
	/ws FMLOCAL
	/im FMLOCAL
	/bs FMLOCAL
	/cs FMLOCAL
	/len FMLOCAL
	/pos FMLOCAL
/ms { 
	/sl exch def 
	/val 255 def 
	/ws cfs 
	/im cfs 
	/val 0 def 
	/bs cfs 
	/cs cfs 
	} bind def
400 ms 
/ip { 
	is 
	0 
	cf cs readline pop 
	{	ic exch get exec 
		add 
		} forall 
	pop 
	
	} bind def
/rip { 
	   
	  
	  bis ris copy pop 
      is
      0
      cf cs readline pop 
      {       ic exch get exec 
              add 
              } forall 
	  pop pop 
	  ris gis copy pop 
	  dup is exch 
	  
      cf cs readline pop 
      {       ic exch get exec 
              add 
              } forall 
	  pop pop
	  gis bis copy pop 
	  dup add is exch 
	  
      cf cs readline pop 
      {       ic exch get exec 
              add 
              } forall 
      pop 
      
      } bind def
/wh { 
	/len exch def 
	/pos exch def 
	ws 0 len getinterval im pos len getinterval copy pop
	pos len 
	} bind def
/bl { 
	/len exch def 
	/pos exch def 
	bs 0 len getinterval im pos len getinterval copy pop
	pos len 
	} bind def
/s1 1 string def
/fl { 
	/len exch def 
	/pos exch def 
	/val cf s1 readhexstring pop 0 get def
	pos 1 pos len add 1 sub {im exch val put} for
	pos len 
	} bind def
/hx { 
	3 copy getinterval 
	cf exch readhexstring pop pop 
	} bind def
	/h FMLOCAL
	/w FMLOCAL
	/d FMLOCAL
	/lb FMLOCAL
	/bitmapsave FMLOCAL
	/is FMLOCAL
	/cf FMLOCAL
/wbytes { 
      dup dup
      24 eq { pop pop 3 mul }
      { 8 eq {pop} {1 eq {7 add 8 idiv} {3 add 4 idiv} ifelse} ifelse } ifelse
	} bind def
/BEGINBITMAPBWc { 
	1 {} COMMONBITMAPc
	} bind def
/BEGINBITMAPGRAYc { 
	8 {} COMMONBITMAPc
	} bind def
/BEGINBITMAP2BITc { 
	2 {} COMMONBITMAPc
	} bind def
/COMMONBITMAPc { 
		 
	/r exch def
	/d exch def
	gsave
	
	3 index 2 div add exch	
	4 index 2 div add exch	
	translate		
	rotate			
	1 index 2 div neg	
	1 index 2 div neg	
	translate		
	scale			
	/h exch def /w exch def
	/lb w d wbytes def 
	sl lb lt {lb ms} if 
	/bitmapsave save def 
	r                    
	/is im 0 lb getinterval def 
	ws 0 lb getinterval is copy pop 
	/cf currentfile def 
	w h d [w 0 0 h neg 0 h] 
	{ip} image 
	bitmapsave restore 
	grestore
	} bind def
/BEGINBITMAPBW { 
	1 {} COMMONBITMAP
	} bind def
/BEGINBITMAPGRAY { 
	8 {} COMMONBITMAP
	} bind def
/BEGINBITMAP2BIT { 
	2 {} COMMONBITMAP
	} bind def
/COMMONBITMAP { 
	/r exch def
	/d exch def
	gsave
	
	3 index 2 div add exch	
	4 index 2 div add exch	
	translate		
	rotate			
	1 index 2 div neg	
	1 index 2 div neg	
	translate		
	scale			
	/h exch def /w exch def
	/bitmapsave save def 
	r                    
	/is w d wbytes string def
	/cf currentfile def 
	w h d [w 0 0 h neg 0 h] 
	{cf is readhexstring pop} image
	bitmapsave restore 
	grestore
	} bind def
/ngrayt 256 array def
/nredt 256 array def
/nbluet 256 array def
/ngreent 256 array def
	/gryt FMLOCAL
	/blut FMLOCAL
	/grnt FMLOCAL
	/redt FMLOCAL
	/indx FMLOCAL
	/cynu FMLOCAL
	/magu FMLOCAL
	/yelu FMLOCAL
	/k FMLOCAL
	/u FMLOCAL
FMLevel1 {
/colorsetup {
	currentcolortransfer
	/gryt exch def
	/blut exch def
	/grnt exch def
	/redt exch def
	0 1 255 {
		/indx exch def
		/cynu 1 red indx get 255 div sub def
		/magu 1 green indx get 255 div sub def
		/yelu 1 blue indx get 255 div sub def
		/k cynu magu min yelu min def
		/u k currentundercolorremoval exec def
%		/u 0 def
		nredt indx 1 0 cynu u sub max sub redt exec put
		ngreent indx 1 0 magu u sub max sub grnt exec put
		nbluet indx 1 0 yelu u sub max sub blut exec put
		ngrayt indx 1 k currentblackgeneration exec sub gryt exec put
	} for
	{255 mul cvi nredt exch get}
	{255 mul cvi ngreent exch get}
	{255 mul cvi nbluet exch get}
	{255 mul cvi ngrayt exch get}
	setcolortransfer
	{pop 0} setundercolorremoval
	{} setblackgeneration
	} bind def
}
{
/colorSetup2 {
	[ /Indexed /DeviceRGB 255 
		{dup red exch get 255 div 
		 exch dup green exch get 255 div 
		 exch blue exch get 255 div}
	] setcolorspace
} bind def
} ifelse
	/tran FMLOCAL
/fakecolorsetup {
	/tran 256 string def
	0 1 255 {/indx exch def 
		tran indx
		red indx get 77 mul
		green indx get 151 mul
		blue indx get 28 mul
		add add 256 idiv put} for
	currenttransfer
	{255 mul cvi tran exch get 255.0 div}
	exch concatprocs settransfer
} bind def
/BITMAPCOLOR { 
	/d 8 def
	gsave
	
	3 index 2 div add exch	
	4 index 2 div add exch	
	translate		
	rotate			
	1 index 2 div neg	
	1 index 2 div neg	
	translate		
	scale			
	/h exch def /w exch def
	/bitmapsave save def
	FMLevel1 {	
		colorsetup
		/is w d wbytes string def
		/cf currentfile def 
		w h d [w 0 0 h neg 0 h] 
		{cf is readhexstring pop} {is} {is} true 3 colorimage 
	} {
		colorSetup2
		/is w d wbytes string def
		/cf currentfile def 
		7 dict dup begin
			/ImageType 1 def
			/Width w def
			/Height h def
			/ImageMatrix [w 0 0 h neg 0 h] def
			/DataSource {cf is readhexstring pop} bind def
			/BitsPerComponent d def
			/Decode [0 255] def
		end image	
	} ifelse
	bitmapsave restore 
	grestore
	} bind def
/BITMAPCOLORc { 
	/d 8 def
	gsave
	
	3 index 2 div add exch	
	4 index 2 div add exch	
	translate		
	rotate			
	1 index 2 div neg	
	1 index 2 div neg	
	translate		
	scale			
	/h exch def /w exch def
	/lb w d wbytes def 
	sl lb lt {lb ms} if 
	/bitmapsave save def 
	FMLevel1 {	
		colorsetup
		/is im 0 lb getinterval def 
		ws 0 lb getinterval is copy pop 
		/cf currentfile def 
		w h d [w 0 0 h neg 0 h] 
		{ip} {is} {is} true 3 colorimage
	} {
		colorSetup2
		/is im 0 lb getinterval def 
		ws 0 lb getinterval is copy pop 
		/cf currentfile def 
		7 dict dup begin
			/ImageType 1 def
			/Width w def
			/Height h def
			/ImageMatrix [w 0 0 h neg 0 h] def
			/DataSource {ip} bind def
			/BitsPerComponent d def
			/Decode [0 255] def
		end image	
	} ifelse
	bitmapsave restore 
	grestore
	} bind def
/BITMAPTRUECOLORc { 
	/d 24 def
        gsave
 	
	3 index 2 div add exch	
	4 index 2 div add exch	
	translate		
	rotate			
	1 index 2 div neg	
	1 index 2 div neg	
	translate		
	scale			
	/h exch def /w exch def
	/lb w d wbytes def 
	sl lb lt {lb ms} if 
        /bitmapsave save def 
        
	/is im 0 lb getinterval def	
	/ris im 0 w getinterval def	
	/gis im w w getinterval def	
	/bis im w 2 mul w getinterval def 
        
        ws 0 lb getinterval is copy pop 
        /cf currentfile def 
        w h 8 [w 0 0 h neg 0 h] 
        {w rip pop ris} {gis} {bis} true 3 colorimage
        bitmapsave restore 
        grestore
        } bind def
/BITMAPTRUECOLOR { 
        gsave
		
		3 index 2 div add exch	
		4 index 2 div add exch	
		translate		
		rotate			
		1 index 2 div neg	
		1 index 2 div neg	
		translate		
		scale			
		/h exch def /w exch def
        /bitmapsave save def 
        /is w string def
        /gis w string def
        /bis w string def
        /cf currentfile def 
        w h 8 [w 0 0 h neg 0 h] 
        { cf is readhexstring pop } 
        { cf gis readhexstring pop } 
        { cf bis readhexstring pop } 
        true 3 colorimage 
        bitmapsave restore 
        grestore
        } bind def
/BITMAPTRUEGRAYc { 
	/d 24 def
        gsave
	
	3 index 2 div add exch	
	4 index 2 div add exch	
	translate		
	rotate			
	1 index 2 div neg	
	1 index 2 div neg	
	translate		
	scale			
	/h exch def /w exch def
	/lb w d wbytes def 
	sl lb lt {lb ms} if 
        /bitmapsave save def 
        
	/is im 0 lb getinterval def	
	/ris im 0 w getinterval def	
	/gis im w w getinterval def	
	/bis im w 2 mul w getinterval def 
        ws 0 lb getinterval is copy pop 
        /cf currentfile def 
        w h 8 [w 0 0 h neg 0 h] 
        {w rip pop ris gis bis w gray} image
        bitmapsave restore 
        grestore
        } bind def
/ww FMLOCAL
/r FMLOCAL
/g FMLOCAL
/b FMLOCAL
/i FMLOCAL
/gray { 
        /ww exch def
        /b exch def
        /g exch def
        /r exch def
        0 1 ww 1 sub { /i exch def r i get .299 mul g i get .587 mul
			b i get .114 mul add add r i 3 -1 roll floor cvi put } for
        r
        } bind def
/BITMAPTRUEGRAY { 
        gsave
		
		3 index 2 div add exch	
		4 index 2 div add exch	
		translate		
		rotate			
		1 index 2 div neg	
		1 index 2 div neg	
		translate		
		scale			
		/h exch def /w exch def
        /bitmapsave save def 
        /is w string def
        /gis w string def
        /bis w string def
        /cf currentfile def 
        w h 8 [w 0 0 h neg 0 h] 
        { cf is readhexstring pop 
          cf gis readhexstring pop 
          cf bis readhexstring pop w gray}  image
        bitmapsave restore 
        grestore
        } bind def
/BITMAPGRAY { 
	8 {fakecolorsetup} COMMONBITMAP
	} bind def
/BITMAPGRAYc { 
	8 {fakecolorsetup} COMMONBITMAPc
	} bind def
/ENDBITMAP {
	} bind def
end 
	/ALDsave FMLOCAL
	/ALDmatrix matrix def ALDmatrix currentmatrix pop
/StartALD {
	/ALDsave save def
	 savematrix
	 ALDmatrix setmatrix
	} bind def
/InALD {
	 restorematrix
	} bind def
/DoneALD {
	 ALDsave restore
	} bind def
/I { setdash } bind def
/J { [] 0 setdash } bind def
%%EndProlog
%%BeginSetup
(4.0) FMVERSION
1 1 0 0 612 792 0 1 13 FMDOCUMENT
0 0 /Helvetica-Bold FMFONTDEFINE
1 0 /NewCenturySchlbk-Roman FMFONTDEFINE
2 1 /ZapfDingbats FMFONTDEFINE
3 0 /NewCenturySchlbk-Bold FMFONTDEFINE
4 0 /Courier FMFONTDEFINE
5 0 /NewCenturySchlbk-Italic FMFONTDEFINE
32 FMFILLS
0 0 FMFILL
1 0.1 FMFILL
2 0.3 FMFILL
3 0.5 FMFILL
4 0.7 FMFILL
5 0.9 FMFILL
6 0.97 FMFILL
7 1 FMFILL
8 <0f1e3c78f0e1c387> FMFILL
9 <0f87c3e1f0783c1e> FMFILL
10 <cccccccccccccccc> FMFILL
11 <ffff0000ffff0000> FMFILL
12 <8142241818244281> FMFILL
13 <03060c183060c081> FMFILL
14 <8040201008040201> FMFILL
16 1 FMFILL
17 0.9 FMFILL
18 0.7 FMFILL
19 0.5 FMFILL
20 0.3 FMFILL
21 0.1 FMFILL
22 0.03 FMFILL
23 0 FMFILL
24 <f0e1c3870f1e3c78> FMFILL
25 <f0783c1e0f87c3e1> FMFILL
26 <3333333333333333> FMFILL
27 <0000ffff0000ffff> FMFILL
28 <7ebddbe7e7dbbd7e> FMFILL
29 <fcf9f3e7cf9f3f7e> FMFILL
30 <7fbfdfeff7fbfdfe> FMFILL
%%EndSetup
%%Page: "141" 1
%%BeginPaperSize: Letter
%%EndPaperSize
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
J
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Making the Changes) 421.86 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(141) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.1) 546.55 539.67 T
81 144 531 648 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
1 10 Q
0 X
(In this chapter) 180 617.33 T
(, the application starts maintaining real document \336les and) 247.96 617.33 T
(allows the user to have more than one document open at a time. This turns) 180 604.33 T
-0.69 (out to be a rather far) 180 591.33 P
-0.69 (-reaching change. Several values can no longer be stored) 273.08 591.33 P
(in global variables. For example, it would be inappropriate to store the) 180 578.33 T
(document\325) 180 565.33 T
(s \336le handle in a global variable, since there may now be several) 226.85 565.33 T
(\336les open. W) 180 552.33 T
(e will take a more object-oriented approach, storing this sort of) 238.34 552.33 T
(information in instance data of objects representing documents.) 180 539.33 T
0 14 Q
(7.1) 142.54 487 T
0 24 Q
(Making the Changes) 180 487 T
1 10 Q
(Make the changes to) 180 461.33 T
1 9 Q
(MCHRT) 278.16 461.33 T
1 10 Q
(.) 312.23 461.33 T
1 9 Q
(GP) 315.01 461.33 T
1 10 Q
( and) 328.02 461.33 T
1 9 Q
(MCHRT) 350.99 461.33 T
1 10 Q
(.) 385.06 461.33 T
1 9 Q
(GOC) 387.84 461.33 T
1 10 Q
( as indicated in Code) 408.34 461.33 T
(Display) 180 448.33 T
(5-) 218.16 448.33 T
(1 and Code Display) 227.05 448.33 T
(5-) 319.48 448.33 T
(2; as before, places where the code has) 328.37 448.33 T
(changed are indicated by vertical bars in the margin. After making the) 180 435.33 T
(changes to the source code, re-compile the executable with) 180 422.33 T
3 F
(pmake) 451.86 422.33 T
1 F
(.) 486.68 422.33 T
0 14 Q
(7.2) 142.54 370 T
0 24 Q
(The Application So Far) 180 370 T
1 10 Q
(Our chart application can now keep track of more than one document at a) 180 344.33 T
-0.16 (time. It provides) 180 331.33 P
1 9 Q
-0.14 (UI) 258.6 331.33 P
1 10 Q
-0.16 ( allowing the user to choose and select document names.) 269.6 331.33 P
(The system allows for automatic saving of documents. Each document) 180 318.33 T
-0.45 (appears in a separate window) 180 305.33 P
-0.45 (. More than one document window may appear) 315.29 305.33 P
(at a time; the user may overlap the windows or tile them.) 180 292.33 T
(T) 180 272.33 T
(o make these changes, the application uses some new objects and goes) 185.75 272.33 T
(through some low-level changes. The low-level changes are necessary) 180 259.33 T
(because there will now be several copies of certain objects within the) 180 246.33 T
(application.) 180 233.33 T
2 F
(u) 180 213.33 T
1 F
(The \322document group\323 object keeps track of all open documents. It) 198 213.33 T
-0.26 (manages all \336le tasks, including opening, closing, saving, and reverting.) 198 201.33 P
(Our document group object is of) 198 189.33 T
3 F
(GenDocumentGroupClass) 347.81 189.33 T
1 F
(. This) 482.62 189.33 T
(object works together with others to automatically create and duplicate) 198 177.33 T
(the objects which represent individual documents.) 198 165.33 T
81 144 531 648 C
235.5 633 376.5 638 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
235.5 633 376.5 638 R
7 X
0 0 0 1 0 0 0 K
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
81 144 531 648 C
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "141" 1
%%Page: "142" 2
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(142) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.3) 54.33 539.67 T
81 144 531 648 R
7 X
V
2 10 Q
0 X
(u) 180 641.33 T
1 F
(The \322display group\323 object maintains the multiple windows with which) 198 641.33 T
(we display the multiple documents. W) 198 629.33 T
(e use an object of) 373.95 629.33 T
3 F
(GenDisplayGroupClass) 198 617.33 T
1 F
(; this class knows about the workings of) 318.92 617.33 T
-0.41 (GenDocumentGroup objects, and our document group and display group) 198 605.33 P
-0.82 (automatically work together and take care of the body of work concerning) 198 593.33 P
(managing the multiple document displays.) 198 581.33 T
2 F
(u) 180 562.33 T
1 F
(W) 198 562.33 T
(e have a controller object, a GenDocumentControl, which provides) 207.26 562.33 T
1 9 Q
(UI) 515.05 562.33 T
1 10 Q
(gadgetry by which the user may request various \336le services from the) 198 550.33 T
-0.06 (document group. This controller provides the contents of the File menu.) 198 538.33 P
2 F
(u) 180 519.33 T
1 F
(Another controller) 198 519.33 T
(, a GenDisplayControl, provides the contents of the) 282.43 519.33 T
-0.22 (W) 198 507.33 P
-0.22 (indows menu. This controller provides) 207.44 507.33 P
1 9 Q
-0.2 (UI) 385.77 507.33 P
1 10 Q
-0.22 ( gadgets allowing the user to) 396.77 507.33 P
(request actions from the display group.) 198 495.33 T
2 F
(u) 180 476.33 T
1 F
(W) 198 476.33 T
(e have created a class to represent a document; it is a subclass of) 207.26 476.33 T
3 F
-0.89 (GenDocumentClass) 198 464.33 P
1 F
-0.86 (.) 299.66 464.33 P
3 F
-0.89 (GenDocumentClass) 304.36 464.33 P
1 F
-0.86 ( provides basic behavior for) 406.02 464.33 P
(saving and updating \336les; we\325ll subclass some handlers speci\336c to the) 198 452.33 T
(way we\325re setting up our) 198 440.33 T
1 9 Q
(UI) 314.31 440.33 T
1 10 Q
(. Also, we\325ll add some messages; we\325ll have) 325.31 440.33 T
(document objects handle the data management tasks the process object) 198 428.33 T
(was handling before.) 198 416.33 T
2 F
(u) 180 397.33 T
1 F
-0.41 (W) 198 397.33 P
-0.41 (e\325re organizing our document \336le into two blocks: the \336rst contains our) 207.26 397.33 P
-0.44 (linked list of chart data; the other contains the visual objects we\325re using) 198 385.33 P
(to display that data. Note that it isn\325) 198 373.33 T
(t necessary to store the visual) 366.95 373.33 T
(objects; we could reconstruct them using the information stored in the) 198 361.33 T
(linked list; we\325re doing things this way only to demonstrate how you) 198 349.33 T
(might save an object within a document \336le.) 198 337.33 T
0 14 Q
(7.3) 142.54 286 T
0 24 Q
(MCHRT) 180 286 T
(.GP: New Resources) 263.98 286 T
1 10 Q
(Our glue parameters \336le has expanded to accommodate several new) 180 260.33 T
(resources and a new subclass.) 180 247.33 T
4 9 Q
(type appl, process) 81 234 T
1 10 Q
-0.01 (The application is once again multi-launchable. Since its document name is) 180 215.33 P
-0.44 (no longer hard-coded, there was no reason to keep it single-launchable. Also,) 180 202.33 P
(in the course of updating the message handlers for multiple documents, we) 180 189.33 T
(had to stop using the shortcuts which kept us from supporting multiple) 180 176.33 T
(running copies of the application.) 180 163.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "142" 2
%%Page: "143" 3
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(MCHRT.GOC: New Structures) 360.43 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(143) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.4) 546.55 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(resource CONTENT object read-only shared) 81 642 T
(resource DISPLAY ui-object read-only shared) 81 631 T
1 10 Q
(W) 180 612.33 T
(e\325ve changed the) 189.26 612.33 T
1 9 Q
(CONTENT) 268.34 612.33 T
1 10 Q
( resource to act as a template. Every time we) 315.01 612.33 T
(create a new document, our handler creates a copy of this resource. The) 180 599.33 T
-0.18 (resource now has new \337ags:) 180 586.33 P
3 F
-0.19 (read-only) 310.58 586.33 P
1 F
-0.18 ( and) 360.21 586.33 P
3 F
-0.19 (shared) 382.82 586.33 P
1 F
-0.18 (. It\325) 418.38 586.33 P
-0.18 (s marked) 433.39 586.33 P
3 F
-0.19 (read-only) 478.77 586.33 P
1 F
(since the original \322template\323 resource is never changed. The) 180 573.33 T
1 9 Q
(DISPLA) 459.83 573.33 T
(Y) 493.84 573.33 T
1 10 Q
(resource contains generic gadgetry which the GenDocumentGroup) 180 560.33 T
(automatically duplicates for each document.) 180 547.33 T
4 9 Q
(resource DOCGROUP object) 81 534 T
1 10 Q
-0.14 (The) 180 515.33 P
1 9 Q
-0.12 (DOCGROUP) 200.42 515.33 P
1 10 Q
-0.14 ( resource contains the document group object. W) 254.76 515.33 P
-0.14 (e want this) 476.95 515.33 P
(object as well as the document objects it manages to run in the process) 180 502.33 T
(thread; they assume the document management tasks formerly carried out) 180 489.33 T
(by the) 180 476.33 T
3 F
(MCProcessClass) 211.49 476.33 T
1 F
( object,) 296.68 476.33 T
4 9 Q
(export MCDocumentClass) 81 463 T
1 10 Q
(W) 180 444.33 T
(e must export our document class so that its symbols are recognized.) 189.26 444.33 T
0 14 Q
(7.4) 142.54 392 T
0 24 Q
(MCHRT) 180 392 T
(.GOC: New Structures) 263.98 392 T
1 10 Q
-0.26 (The start of the application has changed quite a bit. Y) 180 366.33 P
-0.26 (ou may notice that the) 425.43 366.33 P
(global variables are all missing. These were used by the process object to) 180 353.33 T
-0.05 (keep track of document information. Now that we have multiple documents) 180 340.33 P
(to keep track of, global variables would no longer be appropriate. Instead,) 180 327.33 T
(we\325ll set up some appropriate instance data \336elds in our document class.) 180 314.33 T
4 9 Q
(#define MC_DOCUMENT_PROTOCOL_MAJOR 0) 81 301 T
(#define MC_DOCUMENT_PROTOCOL_MINOR 1) 81 290 T
1 10 Q
(These two constants de\336ne a protocol number for the application\325) 180 271.33 T
(s) 480.58 271.33 T
(documents: 0.1. If we later change the structure of the document, we can) 180 258.33 T
(increment the protocol. W) 180 245.33 T
(e would then subclass GenDocument messages) 299.07 245.33 T
-0.38 (which manage opening older documents to add code which would update the) 180 232.33 P
-0.63 (old documents to the new protocol. For now) 180 219.33 P
-0.63 (, we only support one protocol and) 375.04 219.33 P
(thus won\325) 180 206.33 T
(t need this sort of code.) 224.27 206.33 T
4 9 Q
(@class) 81 193 T
(MCProcessClass, GenProcessClass;) 125 193 T
(@endc /* end of MCProcessClass definition */) 81 182 T
1 10 Q
(In past stages of the program, the process class maintained the data) 180 163.33 T
(structures which formed the underlying model of our document. Now we\325re) 180 150.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "143" 3
%%Page: "144" 4
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(144) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.4) 54.33 539.67 T
81 144 531 648 R
7 X
V
1 10 Q
0 X
-0.5 (using our new document class for this purpose, so our process class no longer) 180 641.33 P
(needs its special messages.) 180 628.33 T
4 9 Q
(@class MCDocumentClass, GenDocumentClass;) 81 615 T
1 10 Q
-0.81 (Here we de\336ne our document class. Note that there are no objects of this class) 180 596.33 P
(explicitly declared anywhere in the program. The GenDocumentGroup) 180 583.33 T
(creates objects of this class automatically) 180 570.33 T
(, one for each open document.) 369.47 570.33 T
4 9 Q
(@message \050GEN_DYNAMIC_LIST_QUERY_MSG\051 MSG_MCD_SET_DATA_ITEM_MONIKER;) 125 557 T
(@message void) 125 546 T
(MSG_MCD_DELETE_DATA_ITEM\050\051;) 212.5 546 T
(@message void) 125 535 T
(MSG_MCD_INSERT_DATA_ITEM\050\051;) 212.5 535 T
(@message void) 125 524 T
(MSG_MCD_SET_DATA_ITEM\050\051;) 212.5 524 T
1 10 Q
(W) 180 505.33 T
(e\325ve moved the process class\325 messages over to the new document class.) 189.26 505.33 T
(Also, we changed their names to suit our coding conventions.) 180 492.33 T
4 9 Q
(@instance) 125 479 T
(VMBlockHandle) 179 479 T
(MCDI_dataFileBlock;) 256.5 479 T
(@instance) 125 468 T
(ChunkHandle) 179 468 T
(MCDI_dataListHead;) 256.5 468 T
(@instance) 125 457 T
(MemHandle) 179 457 T
(MCDI_chartMemBlock;) 256.5 457 T
1 10 Q
(These three instance data \336elds, together with some local variables we\325ll) 180 438.33 T
(de\336ne later) 180 425.33 T
(, take the place of the global variables the application used to) 232.04 425.33 T
(have. These three \336elds, together with GenDocumentClass\325) 180 412.33 T
5 9 Q
(GDI) 456.51 412.33 T
5 10 Q
(_\336leHandle) 474.18 412.33 T
1 F
(\336eld serves to keep track of where the document\325) 180 399.33 T
(s data is stored.) 404.64 399.33 T
4 9 Q
(@endc /* end of MCDocumentClass definition */) 81 386 T
(@classdecl) 81 375 T
(MCDocumentClass;) 140.4 375 T
1 10 Q
(W) 180 356.33 T
(e \336nish the class de\336nition and declare the class.) 189.26 356.33 T
4 9 Q
(typedef struct {) 81 343 T
(LMemBlockHeader) 125 332 T
(DBH_standardHeader;) 212.5 332 T
(word) 125 321 T
(DBH_numItems;) 212.5 321 T
(/* Number of data items */) 282.7 321 T
(ChunkHandle) 125 310 T
(DBH_listHead;) 212.5 310 T
(/* Head of linked list */) 288.1 310 T
(VMBlockHandle) 125 299 T
(DBH_chartBlock; /* Block where MCChart is stored */) 212.5 299 T
(} DataBlockHeader;) 81 288 T
1 10 Q
(W) 180 269.33 T
(e\325ve made a couple of new additions to the map block\325) 189.26 269.33 T
(s header structure.) 434.68 269.33 T
(W) 180 256.33 T
(e\325re now saving the visible chart object\325) 189.26 256.33 T
(s object block in the document \336le.) 369.47 256.33 T
-0.66 (W) 180 243.33 P
-0.66 (e\325ll store its handle in the map block\325) 189.26 243.33 P
-0.66 (s header so that we\325ll be able to extract) 353.93 243.33 P
(it when opening the \336le.) 180 230.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "144" 4
%%Page: "145" 5
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(MCHRT.GOC: Application Objects) 331.65 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(145) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.5) 546.55 539.67 T
81 144 531 648 R
7 X
V
0 14 Q
0 X
(7.5) 142.54 632 T
0 24 Q
(MCHRT) 180 632 T
(.GOC: Application) 263.98 632 T
(Objects) 180 604 T
4 9 Q
(@object GenApplicationClass MCApp = {) 81 583 T
(GI_visMoniker = list { @MCTextMoniker }) 125 572 T
(GI_comp = @MCPrimary;) 125 561 T
(gcnList\050MANUFACTURER_ID_GEOWORKS,GAGCNLT_WINDOWS\051 = @MCPrimary;) 125 550 T
(gcnList\050MANUFACTURER_ID_GEOWORKS,MGCNLT_ACTIVE_LIST\051 =) 125 539 T
(@MCDocumentControl, @MCDisplayControl;) 168.98 528 T
(gcnList\050MANUFACTURER_ID_GEOWORKS,MGCNLT_APP_STARTUP\051 =) 125 517 T
(@MCDocumentControl;) 168.98 506 T
(gcnList\050MANUFACTURER_ID_GEOWORKS,GAGCNLT_SELF_LOAD_OPTIONS\051 =) 125 495 T
(@MCDocumentControl, @MCDisplayControl;) 168.98 484 T
(}) 81 473 T
1 10 Q
(The GenApplication object hasn\325) 180 454.33 T
(t changed much, except that we have) 329.28 454.33 T
(entered some of the controller objects on some) 180 441.33 T
1 9 Q
(GCN) 395 441.33 T
1 10 Q
( lists. In general,) 415.83 441.33 T
(controller objects do their jobs automatically) 180 428.33 T
(. They get the messages which) 384.09 428.33 T
(prod them to action only if they are on the proper General Change) 180 415.33 T
(Noti\336cation lists.) 180 402.33 T
(The) 180 382.33 T
1 9 Q
(MGCNL) 200.56 382.33 T
(T_ACTIVE_LIST) 235.4 382.33 T
1 10 Q
( list holds all objects which need to be built on) 307.4 382.33 T
(application start-up. Most controller objects fall into this category) 180 369.33 T
(, and our) 482.24 369.33 T
(document and display controls are on this list.) 180 356.33 T
-0.29 (The) 180 336.33 P
1 9 Q
-0.26 (MGCNL) 200.27 336.33 P
-0.26 (T_APP_ST) 235.11 336.33 P
-0.26 (ARTUP) 279.79 336.33 P
1 10 Q
-0.29 ( list is for those objects that need to know when) 312.13 336.33 P
(the application has just started or is about to exit.) 180 323.33 T
-0.82 (The) 180 303.33 P
1 9 Q
-0.74 (GAGCNL) 199.74 303.33 P
-0.74 (T_SELF_LOAD_OPTIONS) 239.58 303.33 P
1 10 Q
-0.82 ( list holds all objects which may need to) 352.44 303.33 P
(save their options. This comes in handy when trying to maintain the user) 180 290.33 T
(\325) 519.85 290.33 T
(s) 521.52 290.33 T
1 9 Q
(UI) 180 277.33 T
1 10 Q
( choices.) 191 277.33 T
-0.69 (It may not be entirely obvious which sorts of controllers belong on which) 180 257.33 P
1 9 Q
-0.62 (GCN) 508.08 257.33 P
1 10 Q
(lists. When using an unfamiliar controller) 180 244.33 T
(, read its documentation.) 373.53 244.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "145" 5
%%Page: "146" 6
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(146) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.6) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@object GenPrimaryClass MCPrimary = {) 81 642 T
(GI_comp = @MCFileGroup, @MCWindowGroup, @MCDisplayGroup;) 125 631 T
(ATTR_GEN_DISPLAY_MENU_BAR_POPPED_OUT;) 125 620 T
(HINT_DISPLAY_MENU_BAR_HIDDEN_ON_STARTUP;) 125 609 T
(}) 81 598 T
1 10 Q
-0.86 (Our primary window now has different children. Most of the original children) 180 579.33 P
(are now duplicated for each document\325) 180 566.33 T
(s display) 357.04 566.33 T
(. The primary\325) 396.68 566.33 T
(s children are) 462.06 566.33 T
(now a couple of menus and the display group.) 180 553.33 T
-0.24 (Furthermore, we\325ve added a couple of variable data \336elds which will make a) 180 533.33 P
-0.3 (bit more room when running the program on a machine with a small screen.) 180 520.33 P
(the) 180 507.33 T
1 9 Q
(A) 197.78 507.33 T
(TTR_GEN_DISPLA) 203.78 507.33 T
(Y_MENU_BAR_POPPED_OUT) 286.13 507.33 T
1 10 Q
( \336eld indicates that the) 418.48 507.33 T
(menu bar should be \337oating and the) 180 494.33 T
1 9 Q
-0.53 (HINT_DISPLA) 180 481.33 P
-0.53 (Y_MENU_BAR_HIDDEN_ON_ST) 243.01 481.33 P
-0.53 (ARTUP) 385.52 481.33 P
1 10 Q
-0.59 ( hint says that the menu) 417.85 481.33 P
-0.55 (bar should start out hidden on those systems that support hidden menu bars.) 180 468.33 P
0 14 Q
(7.6) 142.54 416 T
0 24 Q
(Menus and Controllers) 180 416 T
1 10 Q
(In past stages of the application, we only had one menu \050the File menu\051,) 180 390.33 T
-0.45 (generated automatically) 180 377.33 P
-0.45 (. For this stage of the application, we create our own) 291.05 377.33 P
(menus, including a File menu which takes the place of the automatically) 180 364.33 T
(generated one. W) 180 351.33 T
(e implement each menu by means of a GenInteraction) 259.82 351.33 T
-0.23 (object. Recall that GenInteractions are meant to create logical groupings for) 180 338.33 P
1 9 Q
(UI) 180 325.33 T
1 10 Q
( gadgetry; since menus group) 191 325.33 T
1 9 Q
(UI) 329.15 325.33 T
1 10 Q
( gadgetry it makes sense to implement) 340.15 325.33 T
(them in this way) 180 312.33 T
(.) 256.87 312.33 T
4 9 Q
(@object GenInteractionClass MCFileGroup = {) 81 299 T
(GI_comp = @MCDocumentControl;) 125 288 T
(GII_visibility = GIV_POPUP;) 125 277 T
(ATTR_GEN_INTERACTION_GROUP_TYPE = GIGT_FILE_MENU;) 125 266 T
(}) 81 255 T
1 10 Q
(The) 180 236.33 T
3 F
(MCFileGroup) 200.56 236.33 T
1 F
( object manifests as the File menu. It has one child, our) 271.48 236.33 T
(document control; this means that our) 180 223.33 T
1 9 Q
(UI) 359.64 223.33 T
1 10 Q
( gadgetry for saving and opening) 370.64 223.33 T
(documents appears under the File menu, which is where we want it. The) 180 210.33 T
5 9 Q
-0.83 (GII) 180 197.33 P
5 10 Q
-0.92 (_visibility) 194.33 197.33 P
1 F
-0.92 ( \336eld determines how the object manifests itself; the) 239.69 197.33 P
1 9 Q
-0.83 (GIV_POPUP) 475.13 197.33 P
1 10 Q
(value causes it to appear as a pop-up menu.) 180 184.33 T
-0.61 (The last \336eld is not a regular instance data \336eld. It is a piece of variable data.) 180 164.33 P
-0.65 (Like hints, variable data is stored in a buffer at the end of the object\325) 180 151.33 P
-0.65 (s regular) 488.04 151.33 P
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "146" 6
%%Page: "147" 7
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Menus and Controllers) 406.31 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(147) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.6) 546.55 539.67 T
81 144 531 648 R
7 X
V
1 10 Q
0 X
-0.65 (data. Actually) 180 641.33 P
-0.65 (, hints) 243.44 641.33 P
5 F
-0.65 (are) 274.36 641.33 P
1 F
-0.65 ( variable data \336elds. If you\325re interested to know how) 288.98 641.33 P
(hints and other variable data \336elds are stored, read "GEOS Programming,") 180 628.33 T
(Chapter) 180 615.33 T
(5 of the Concepts book.) 220.74 615.33 T
(The) 180 595.33 T
1 9 Q
(A) 200.56 595.33 T
(TTR_GEN_INTERACTION_GROUP_TYPE) 206.56 595.33 T
1 10 Q
( allows you to specify that a) 389.58 595.33 T
(GenInteraction should manifest as one of a number of standard UI) 180 582.33 T
(interactions. By using this variable data \336eld with the) 180 569.33 T
1 9 Q
(GIGT_FILE_MENU) 433.38 569.33 T
1 10 Q
-0.67 (value, we ask that this GenInteraction appear as a File menu appropriate for) 180 556.33 P
-0.66 (the user) 180 543.33 P
-0.66 (\325) 217.85 543.33 P
-0.66 (s speci\336c user interface. The Motif speci\336c user interface puts a Quit) 219.52 543.33 P
-0.58 (trigger in this menu and supply the GenInteraction with the correct moniker) 180 530.33 P
(\050\322File\323\051.) 180 517.33 T
4 9 Q
(@object GenDocumentControlClass MCDocumentControl = {) 81 504 T
(GDCI_documentToken = {\322MCht\323, MANUFACTURER_ID_GEOWORKS } ;) 125 493 T
(GDCI_noNameText = \322No Document\323;) 125 482 T
(GDCI_documentGroup = MCDocumentGroup;) 125 471 T
(GDCI_attrs = @default | GDCA_MULTIPLE_OPEN_FILES;) 125 460 T
(GDCI_features = @default & ~GDCF_NAME_ON_PRIMARY;) 125 449 T
(}) 81 438 T
1 10 Q
-0.44 (The document control provides all user gadgetry for manipulating document) 180 419.33 P
(\336les. It works together with the document group to provide \336le services.) 180 406.33 T
-0 (W) 180 386.33 P
-0 (e specify a token for our document \336les in the) 189.26 386.33 P
5 9 Q
-0 (GDCI) 401.81 386.33 P
5 10 Q
-0 (_documentT) 425.98 386.33 P
-0 (oken) 481.56 386.33 P
1 F
-0 ( \336eld.) 502.67 386.33 P
-0.61 (When the user wants to open a document, the document control\325) 180 373.33 P
-0.61 (s \336le selector) 470.04 373.33 P
(dialog only displays \336les whose tokens match this value.) 180 360.33 T
(W) 180 340.33 T
(e put the object pointer of the document group object in the document) 189.26 340.33 T
-0.47 (control\325) 180 327.33 P
-0.47 (s) 213.7 327.33 P
5 9 Q
-0.42 (GDCI) 220.64 327.33 P
5 10 Q
-0.47 (_documentGroup) 244.81 327.33 P
1 F
-0.47 ( instance \336eld. Remember that the document) 323.5 327.33 P
-0.41 (group is the object which carries out all \336le operations; the document control) 180 314.33 P
-0.52 (sends messages to the document group whenever the user wants to carry out) 180 301.33 P
(one of these \336le operations. W) 180 288.33 T
(e must set the value in this instance \336eld so) 317.79 288.33 T
(that the document control knows where to send these messages.) 180 275.33 T
(The) 180 255.33 T
5 9 Q
(GDCI) 200.56 255.33 T
5 10 Q
(_attrs) 224.73 255.33 T
1 F
( \336eld allows us to set some attributes associated with the) 251.38 255.33 T
-0.71 (document control. In this case, the only unusual thing we\325re doing is allowing) 180 242.33 P
(multiple open \336les.) 180 229.33 T
(W) 180 209.33 T
(e\325re turning off the) 189.26 209.33 T
1 9 Q
(GDCF_NAME_ON_PRIMAR) 278.7 209.33 T
(Y) 399.19 209.33 T
1 10 Q
( \337ag within the) 405.53 209.33 T
5 9 Q
(GDCI) 180 196.33 T
5 10 Q
(_features) 204.16 196.33 T
1 F
( instance \336eld. Leaving this \337ag on would mean that we\325d try) 245.62 196.33 T
-0.54 (to display the current document name on the title bar of the primary window) 180 183.33 P
-0.23 (under some circumstances we\325re not prepared to handle. Even with this \337ag) 180 170.33 P
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "147" 7
%%Page: "148" 8
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(148) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.7) 54.33 539.67 T
81 144 531 648 R
7 X
V
1 10 Q
0 X
-0.78 (off, the document name still displays when there is a document display which) 180 641.33 P
(is showing full-screen.) 180 628.33 T
4 9 Q
(@object GenInteractionClass MCWindowGroup = {) 81 615 T
(GI_comp = @MCDisplayControl;) 125 604 T
(GII_visibility = GIV_POPUP;) 125 593 T
(ATTR_GEN_INTERACTION_GROUP_TYPE = GIGT_WINDOW_MENU;) 125 582 T
(}) 81 571 T
1 10 Q
(This interaction manifests as the W) 180 552.33 T
(indows menu. As with the File menu, it) 345.02 552.33 T
(uses) 180 539.33 T
1 9 Q
(GIV_POPUP) 203.15 539.33 T
1 10 Q
( and an) 257.16 539.33 T
1 9 Q
(A) 294.58 539.33 T
(TTR_GEN_INTERACTION_GROUP_TYPE) 300.58 539.33 T
1 10 Q
( value. It) 483.6 539.33 T
(has one child, the display control.) 180 526.33 T
4 9 Q
(@object GenDisplayControlClass MCDisplayControl = {}) 81 513 T
1 10 Q
(The display control provides the) 180 494.33 T
1 9 Q
(UI) 331.12 494.33 T
1 10 Q
( gadgetry for overlapping, tiling, and) 342.12 494.33 T
(otherwise manipulating the multiple document displays. W) 180 481.33 T
(e aren\325) 453.74 481.33 T
(t doing) 484.49 481.33 T
(anything extraordinary with our display control, and need set no instance) 180 468.33 T
(data for it. Because we have placed it on the appropriate General Change) 180 455.33 T
(Noti\336cation lists, it works automatically) 180 442.33 T
(.) 365.23 442.33 T
0 14 Q
(7.7) 142.54 390 T
0 24 Q
(Display Gadgets) 180 390 T
1 10 Q
-0.59 (In addition to the display control, we need to set up a display group and some) 180 364.33 P
(objects to represent the display itself.) 180 351.33 T
4 9 Q
(@object GenDisplayGroupClass MCDisplayGroup = { }) 81 338 T
1 10 Q
(This is the object that actually manages the document displays. W) 180 319.33 T
(e aren\325) 485.98 319.33 T
(t) 516.73 319.33 T
-0.82 (doing anything very special with our document displays, and don\325) 180 306.33 P
-0.82 (t need to set) 475.02 306.33 P
(any instance data \336elds for the object.) 180 293.33 T
4 9 Q
(@start) 81 280 T
(Display;) 125 280 T
1 10 Q
(The Display resource is a template resource. The document group) 180 261.33 T
(automatically creates a copy of this resource for each opened document; it) 180 248.33 T
(passes control of the display over to the display group object.) 180 235.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "148" 8
%%Page: "149" 9
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Display Gadgets) 448.3 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(149) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.7) 546.55 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@object GenDisplayClass MCDisplay = {) 81 642 T
(GI_comp = @MCLeftClump, @MCChartView;) 125 631 T
(GI_states = @default & ~GS_USABLE;) 125 620 T
(ATTR_GEN_DISPLAY_NOT_MINIMIZABLE;) 125 609 T
(HINT_ORIENT_CHILDREN_HORIZONTALLY;) 125 598 T
(}) 81 587 T
(@end) 81 576 T
(Display;) 125 576 T
1 10 Q
(The) 180 557.33 T
3 F
(MCDisplay) 200.56 557.33 T
1 F
( object is a window object like) 257.59 557.33 T
3 F
(MCPrimary) 396.88 557.33 T
1 F
(. In fact,) 456.88 557.33 T
3 F
(GenPrimaryClass) 180 544.33 T
1 F
( \050the class of) 271.85 544.33 T
3 F
(MCPrimary) 332.04 544.33 T
1 F
(\051 is a subclass of) 393.15 544.33 T
3 F
(GenDisplayClass) 180 531.33 T
1 F
( with some extra behavior speci\336c to a primary window) 267.77 531.33 T
(.) 521.88 531.33 T
(The) 180 511.33 T
5 9 Q
(GI) 200.56 511.33 T
5 10 Q
(_comp) 211.23 511.33 T
1 F
( and) 240.29 511.33 T
1 9 Q
(HINT_ORIENT_CHILDREN_HORIZONT) 263.27 511.33 T
(ALL) 439.26 511.33 T
(Y) 456.94 511.33 T
1 10 Q
( \336elds are set) 463.27 511.33 T
(up as they were for) 180 498.33 T
3 F
(MCPrimary) 271.3 498.33 T
1 F
( in the program\325) 332.41 498.33 T
(s previous stage.) 406.12 498.33 T
(Some other \336elds have been set up so that the display may work in) 180 478.33 T
(conjunction with the display control. The) 180 465.33 T
5 9 Q
(GI) 371.86 465.33 T
5 10 Q
(_states) 382.52 465.33 T
1 F
( \336eld has been set up so) 413.62 465.33 T
(that the display starts out as not enabled. When an object has been so) 180 452.33 T
(marked, it is normally grayed out and the user won\325) 180 439.33 T
(t be allowed to interact) 419.67 439.33 T
(with the object. Note that by the time the display actually appears, it won\325) 180 426.33 T
(t) 522.86 426.33 T
(be grayed out; the display group automatically enables it. The) 180 413.33 T
1 9 Q
(A) 180 400.33 T
(TTR_GEN_DISPLA) 186 400.33 T
(Y_NOT_MINIMIZABLE) 268.35 400.33 T
1 10 Q
( variable data \336eld eliminates the) 370.34 400.33 T
(minimize button; we don\325) 180 387.33 T
(t have any behavior set up if the user tries to) 296.32 387.33 T
(minimize the display) 180 374.33 T
(, so we won\325) 275.94 374.33 T
(t allow it.) 330.22 374.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "149" 9
%%Page: "150" 10
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(150) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.7) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@start) 81 642 T
(Display;) 125 642 T
(@object GenDynamicListClass MCDataList = {) 81 631 T
(GIGI_selection = FAKE_LIST_ITEM;) 125 620 T
(GIGI_numSelections = 1;) 125 609 T
(GIGI_applyMsg = 0;) 125 598 T
(GIGI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 125 587 T
(GDLI_numItems = 1;) 125 576 T
(GDLI_queryMsg = MSG_MCD_SET_DATA_ITEM_MONIKER;) 125 565 T
(HINT_ITEM_GROUP_SCROLLABLE;) 125 554 T
(}) 81 543 T
(@object GenTriggerClass MCAddTrigger = {) 81 532 T
(GI_visMoniker = \322Add\323;) 102.6 521 T
(GTI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 510 T
(GTI_actionMsg = MSG_MCD_INSERT_DATA_ITEM;) 102.6 499 T
(}) 81 488 T
(@object GenTriggerClass MCChangeTrigger = {) 81 477 T
(GI_visMoniker = \322Change\323;) 102.6 466 T
(GTI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 455 T
(GTI_actionMsg = MSG_MCD_SET_DATA_ITEM;) 102.6 444 T
(}) 81 433 T
(@object GenTriggerClass MCDeleteTrigger = {) 81 422 T
(GI_visMoniker = \322Delete\323;) 102.6 411 T
(GTI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 400 T
(GTI_actionMsg = MSG_MCD_DELETE_DATA_ITEM;) 102.6 389 T
(}) 81 378 T
(@end) 81 360 T
(Display;) 108 360 T
1 10 Q
-0.69 (These are our old data-entry) 180 341.33 P
1 9 Q
-0.62 (UI) 311.2 341.33 P
1 10 Q
-0.69 ( gadgets. They\325ve been moved into the display) 322.2 341.33 P
(resource and have been set up with different) 180 328.33 T
5 9 Q
(GIGI) 388.71 328.33 T
5 10 Q
(_destination) 410.04 328.33 T
1 F
( \336eld) 466.69 328.33 T
(values\321they now send their actions using a travel option rather than the) 180 315.33 T
5 F
(process) 180 302.33 T
1 F
( keyword. T) 212.94 302.33 T
(ravel options are special values that may be placed in) 266.59 302.33 T
-0.81 (destination \336elds; they may be used to send messages to objects based on that) 180 289.33 P
(object\325) 180 276.33 T
(s place within the program rather than its object pointer) 208.52 276.33 T
(.) 468.91 276.33 T
-0.52 (Any object block can have an \322object block output\323. This \322object block output\323) 180 256.33 P
(is merely an object which expects to receive certain messages from objects) 180 243.33 T
-0.21 (within the block. The object block output object need not be within the block) 180 230.33 P
(for which it is the output. When the document group sets up the document) 180 217.33 T
(and display objects, the document object was automatically set up as the) 180 204.33 T
(object block output for the Display object block.) 180 191.33 T
(The) 180 171.33 T
1 9 Q
(TO_OBJ_BLOCK_OUTPUT) 200.56 171.33 T
1 10 Q
( travel option tells our generic UI gadgetry to) 318.25 171.33 T
-0.13 (send their messages to the Display block\325) 180 158.33 P
-0.13 (s object block output, which in this) 368.72 158.33 P
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "150" 10
%%Page: "151" 11
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Document Group) 443.66 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(151) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.8) 546.55 539.67 T
81 144 531 648 R
7 X
V
1 10 Q
0 X
-0.71 (case is the document object associated with the display\325) 180 641.33 P
-0.71 (s document. Since our) 429.57 641.33 P
-0.46 (document object is now in charge of maintaining the data for each object, the) 180 628.33 P
-0.3 (gadgets which work with the data use the appropriate travel option to reach) 180 615.33 P
(the document.) 180 602.33 T
0 14 Q
(7.8) 142.54 550 T
0 24 Q
(Document Group) 180 550 T
4 9 Q
(@start) 81 529 T
(DocGroup;) 125 529 T
(@object GenDocumentGroupClass MCDocumentGroup = {) 81 518 T
(GDGI_attrs = \050@default | GDGA_VM_FILE_CONTAINS_OBJECTS \051;) 125 507 T
(GDGI_untitledName = \322UntitledChart\323;) 125 496 T
(GDGI_documentClass = \050ClassStruct *\051 &MCDocumentClass;) 125 485 T
(GDGI_documentControl = MCDocumentControl;) 125 474 T
(GDGI_genDisplayGroup = MCDisplayGroup;) 125 463 T
(GDGI_genView = MCChartView;) 125 452 T
(GDGI_genDisplay = MCDisplay;) 125 441 T
(GDGI_protocolMajor = MC_DOCUMENT_PROTOCOL_MAJOR;) 125 430 T
(GDGI_protocolMinor = MC_DOCUMENT_PROTOCOL_MINOR;) 125 419 T
(}) 81 408 T
(@end) 81 397 T
(DocGroup;) 125 397 T
3 10 Q
(MCDocumentGroup) 180 378.33 T
1 F
( is our document group object, the object which) 284.07 378.33 T
-0.44 (manages our multiple documents. It must be in a resource which runs under) 180 365.33 P
(the application\325) 180 352.33 T
(s process thread, and is. It interacts with many objects and) 250.94 352.33 T
(has many important object pointers stored in its instance data. Note that) 180 339.33 T
3 F
-0.88 (MCDocumentGroup) 180 326.33 P
1 F
-0.85 ( doesn\325) 284.07 326.33 P
-0.85 (t appear in the application\325) 314.34 326.33 P
-0.85 (s generic tree; it isn\325) 435.42 326.33 P
-0.85 (t) 525.18 326.33 P
-0.39 (the child of any object, but only appears in the) 180 313.33 P
5 9 Q
-0.35 (GDCI) 392.64 313.33 P
5 10 Q
-0.39 (_documentGroup) 416.8 313.33 P
1 F
-0.39 ( \336eld of) 495.49 313.33 P
(the) 180 300.33 T
3 F
(GenDocumentControl) 197.78 300.33 T
1 F
(.) 311.85 300.33 T
(The) 180 280.33 T
5 9 Q
(GDGI) 200.56 280.33 T
5 10 Q
(_attrs) 225.23 280.33 T
1 F
( allows you to specify some special attributes for the) 251.89 280.33 T
-0.43 (document group. Our document \336les include an object block, the block which) 180 267.33 P
-0.1 (contains the visible objects. This is somewhat unusual, and we must set the) 180 254.33 P
1 9 Q
-0.03 (GDGA_VM_FILE_CONT) 180 241.33 P
-0.03 (AINS_OBJECTS) 284.51 241.33 P
1 10 Q
-0.04 ( \337ag here, as the document group has) 355.35 241.33 P
(to do some extra \336le work to handle saving the objects.) 180 228.33 T
-0.01 (The) 180 208.33 P
5 9 Q
-0.01 (GDGI) 200.55 208.33 P
5 10 Q
-0.01 (_untitledName) 225.21 208.33 P
1 F
-0.01 ( \336eld speci\336es a document name to use for untitled) 293.9 208.33 P
-0.85 (documents. If another untitled document is created, it will be called \322Untitled) 180 195.33 P
(Chart 1\323. Further untitled documents will be given names with successive) 180 182.33 T
(numbers.) 180 169.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "151" 11
%%Page: "152" 12
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(152) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.9) 54.33 539.67 T
81 144 531 648 R
7 X
V
1 10 Q
0 X
-0.18 (Remember that we aren\325) 180 641.33 P
-0.18 (t explicitly declaring any document objects; instead) 292.99 641.33 P
-0.37 (we pass the address of our document class in the) 180 628.33 P
5 9 Q
-0.33 (GDGI) 403.94 628.33 P
5 10 Q
-0.37 (_documentClass) 428.61 628.33 P
1 F
-0.37 ( \336eld.) 503.39 628.33 P
(The document group automatically creates an object of this class for each) 180 615.33 T
(open document. The document group sends appropriate messages to the) 180 602.33 T
-0.82 (document object when the user wants to perform some \336le operation upon the) 180 589.33 P
(document.) 180 576.33 T
(The Document group needs to work with the document control and display) 180 556.33 T
(group objects, and their object pointers are stored in its) 180 543.33 T
5 9 Q
(GDGI) 180 530.33 T
5 10 Q
(_documentControl) 204.67 530.33 T
1 F
( and) 288.91 530.33 T
5 9 Q
(GDGI) 311.88 530.33 T
5 10 Q
(_genDisplayGroup) 336.55 530.33 T
1 F
( \336elds. The) 421.9 530.33 T
5 9 Q
(GDGI) 180 517.33 T
5 10 Q
(_genV) 204.67 517.33 T
(iew) 232.01 517.33 T
1 F
( \336eld tells the document where it displays within the) 247.56 517.33 T
-0.1 (duplicated resource. The) 180 504.33 P
5 9 Q
-0.09 (GDGI) 296.19 504.33 P
5 10 Q
-0.1 (_genDisplay) 320.86 504.33 P
1 F
-0.1 ( resource provides the location of) 377.14 504.33 P
(the GenDisplay\325) 180 491.33 T
(s resource within the duplicated Display resource and) 253.72 491.33 T
-0.74 (incidentally provides the address of the Display resource itself; the document) 180 478.33 P
(group uses this value to determine which resource it should automatically) 180 465.33 T
(duplicate.) 180 452.33 T
-0.41 (The last two instance \336elds contain protocol numbers. If we later revised the) 180 432.33 P
(application in a way that changed the structure of the document \336les, we) 180 419.33 T
(would change the document protocol. W) 180 406.33 T
(e could then write handlers in our) 363.15 406.33 T
(document class for updating old documents, which would be recognized by) 180 393.33 T
(their low protocol numbers.) 180 380.33 T
0 14 Q
(7.9) 142.54 328 T
0 24 Q
(Altered Handlers) 180 328 T
4 9 Q
(@method MCDocumentClass, MSG_MCD_SET_DATA_ITEM_MONIKER {) 81 307 T
(if \050item==FAKE_LIST_ITEM\051 {) 125 296 T
(optr) 168.98 285 T
(moniker;) 212.5 285 T
(moniker = ConstructOptr\050OptrToHandle\050list\051,) 168.98 274 T
(OptrToChunk\050@FakeItemMoniker\051\051;) 256.5 263 T
(@send list::MSG_GEN_DYNAMIC_LIST_REPLACE_ITEM_MONIKER_OPTR\050) 168.98 252 T
(FAKE_LIST_ITEM, moniker\051;}) 256.5 241 T
1 10 Q
(In this code fragment we can see the \336rst side effect of supporting multiple) 180 222.33 T
-0.15 (documents. In the previous stage of the program, there was only one copy of) 180 209.33 P
(each resource. This time we\325ve duplicated the resource which contains) 180 196.33 T
(FakeItemMoniker) 180 183.33 T
(. Thus, if we were to refer to it directly) 263.34 183.33 T
(, the value) 440.02 183.33 T
3 F
-0.83 (@FakeItemMoniker) 180 170.33 P
1 F
-0.8 ( would be ambiguous\321we can\325) 281.35 170.33 P
-0.8 (t know which resource it) 418.72 170.33 P
-0.02 (would refer to. Thus we construct an object pointer) 180 157.33 P
-0.02 (. W) 414.07 157.33 P
-0.02 (e know that the block) 428.87 157.33 P
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "152" 12
%%Page: "153" 13
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Altered Handlers) 445.97 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(153) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.9) 546.55 539.67 T
81 144 531 648 R
7 X
V
1 10 Q
0 X
(containing the dynamic list object contains the moniker) 180 641.33 T
(, so we extract its) 435.95 641.33 T
-0.34 (block handle. W) 180 628.33 P
-0.34 (e use our knowledge of the moniker) 252.67 628.33 P
-0.34 (\325) 415.07 628.33 P
-0.34 (s object pointer to get its) 416.74 628.33 P
(chunk handle. Finally) 180 615.33 T
(, we create a new object pointer by combining these) 280.76 615.33 T
(handles and use that to reference the duplicated moniker) 180 602.33 T
(.) 444.09 602.33 T
4 9 Q
(else /* item > FAKE_LIST_ITEM */ {) 125 589 T
(ChunkHandle) 168.98 578 T
(tempListItem;) 256.5 578 T
(ListNode) 168.98 567 T
(*tempNode;) 256.5 567 T
(char) 168.98 556 T
(monikerString[LOCAL_DISTANCE_BUFFER_SIZE];) 256.5 556 T
(word) 168.98 545 T
(data;) 256.5 545 T
(MemHandle) 168.98 534 T
(dataListBlock;) 256.5 534 T
(MemHandle) 168.98 523 T
(*dataListBlockPtr = &dataListBlock;) 256.5 523 T
(word) 168.98 512 T
(ordinal = item;) 256.5 512 T
(VMLock\050pself->GDI_fileHandle,) 125 501 T
( pself->MCDI_dataFileBlock,) 125 490 T
( dataListBlockPtr\051;) 125 479 T
(for\050tempNode = LMemDerefHandles\050dataListBlock,) 125 461 T
(pself->MCDI_dataListHead\051;) 212.5 450 T
( ordinal > 1;) 125 439 T
( --ordinal\051) 125 428 T
({) 145.8 417 T
( tempListItem = tempNode->LN_next;) 145.8 406 T
( tempNode = LMemDerefHandles\050dataListBlock, tempListItem\051;) 145.8 395 T
(}) 145.8 384 T
(data = tempNode->LN_data;) 125 373 T
(VMUnlock\050dataListBlock\051;) 125 362 T
1 10 Q
(Here we\325re absorbing the function of the) 180 343.33 T
3 F
(MCListGetDataItem\050\051) 368.34 343.33 T
1 F
( routine) 481.1 343.33 T
(and absorbing it back into our handler) 180 330.33 T
(. This isn\325) 357.07 330.33 T
(t necessarily good coding) 401.72 330.33 T
(practice, but makes this a more readable tutorial.) 180 317.33 T
-0.68 (Note that instead of using global variables to store the document\325) 180 297.33 P
-0.68 (s \336le handle) 474.15 297.33 P
(\050dif\336cult to do since there may be several document \336les open\051, we\325re using) 180 284.33 T
(the document\325) 180 271.33 T
(s automatically maintained) 244.63 271.33 T
5 9 Q
(GDI) 374.2 271.33 T
5 10 Q
(_\336leHandle) 391.87 271.33 T
1 F
( instance \336eld.) 444.81 271.33 T
(There is one other change, rather trivial: because the document has taken) 180 251.33 T
(over the data maintenance tasks, the data list\325) 180 238.33 T
(s head is now stored in a) 394.5 238.33 T
3 F
(MCDocumentClass) 180 225.33 T
1 F
( instance \336eld,) 278.33 225.33 T
5 9 Q
(MCDI) 348.34 225.33 T
5 10 Q
(_dataListHead) 374 225.33 T
1 F
( instead of in an) 442.69 225.33 T
3 F
(MCProcessClass) 180 212.33 T
1 F
( \336eld.) 265.19 212.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "153" 13
%%Page: "154" 14
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(154) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.9) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@method MCDocumentClass, MSG_MCD_INSERT_DATA_ITEM {) 81 642 T
(ChunkHandle) 125 631 T
(newListItem;) 189.8 631 T
(ListNode) 125 620 T
(*newNode;) 173.6 620 T
(WWFixedAsDWord) 125 609 T
(value;) 200.6 609 T
(word) 125 598 T
(ordinal;) 212.5 598 T
(MemHandle) 125 587 T
(dataListBlock;) 179 587 T
(MemHandle) 125 576 T
(*dataListBlockPtr = &dataListBlock;) 179 576 T
(optr) 125 565 T
(ourList;) 212.5 565 T
(optr) 125 554 T
(ourValue;) 212.5 554 T
(optr) 125 543 T
(ourChart;) 212.5 543 T
(DataBlockHeader *dataBlockHeader;) 125 532 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 521 T
(OptrToChunk\050@MCDataList\051\051;) 168.98 510 T
(ordinal = @call ourList::MSG_GEN_ITEM_GROUP_GET_SELECTION\050\051;) 102.6 499 T
(ourValue = ConstructOptr\050pself->GDI_display,) 102.6 488 T
( OptrToChunk\050@MCValue\051\051;) 168.98 477 T
(value = @call ourValue::MSG_GEN_VALUE_GET_VALUE\050\051;) 102.6 466 T
1 10 Q
(Where in previous stages of the program we sent messages to objects by) 180 447.33 T
-0.24 (simply using the object\325) 180 434.33 P
-0.24 (s name as the target of an) 287.44 434.33 P
3 F
-0.25 (@call) 408.76 434.33 P
1 F
-0.24 (, now we must make) 434.94 434.33 P
-0.18 (it clear which object we are sending the message to; all of these objects have) 180 421.33 P
-0.02 (been duplicated. The document\325) 180 408.33 P
-0.02 (s) 325.88 408.33 P
5 9 Q
-0.02 (GDI) 333.27 408.33 P
5 10 Q
-0.02 (_display) 350.93 408.33 P
1 F
-0.02 ( \336eld contains the object block) 389.62 408.33 P
-0.8 (handle of the duplicate display resource. Combining that with the chunk part) 180 395.33 P
-0.42 (of whichever object we want, we construct a new object pointer which we use) 180 382.33 P
(as the recipient of the message.) 180 369.33 T
4 9 Q
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 125 356 T
( pself->MCDI_dataFileBlock,) 256.5 345 T
( dataListBlockPtr\051;) 256.5 334 T
1 10 Q
(Again, instead of using global variables to reference data, we instead use) 180 315.33 T
(instance data \336elds of the document object.) 180 302.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "154" 14
%%Page: "155" 15
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Altered Handlers) 445.97 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(155) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.9) 546.55 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(if \050ordinal==FAKE_LIST_ITEM\051) 125 642 T
( {) 125 631 T
(newNode->LN_next = pself->MCDI_dataListHead;) 168.98 620 T
(pself->MCDI_dataListHead = newListItem;) 168.98 609 T
( }) 125 598 T
(else) 125 587 T
( {) 125 576 T
(ListNode) 168.98 565 T
(*tempNode;) 217.58 565 T
(ChunkHandle) 168.98 554 T
(tempListItem;) 233.78 554 T
(word) 168.98 543 T
(count = ordinal;) 256.5 543 T
(for \050tempNode = LMemDerefHandles\050dataListBlock,) 168.98 532 T
( pself->MCDI_dataListHead\051;) 344 521 T
( count > 1;) 168.98 510 T
( --count\051) 168.98 499 T
( {) 168.98 488 T
(tempListItem = tempNode->LN_next;) 212.5 477 T
(tempNode = LMemDerefHandles\050dataListBlock,) 212.5 466 T
( tempListItem\051;) 344 455 T
( }) 168.98 444 T
(newNode->LN_next = tempNode->LN_next;) 168.98 433 T
(tempNode->LN_next = newListItem;) 168.98 422 T
( }) 125 411 T
1 10 Q
(There are more scattered places where we must use the instance \336elds to) 180 392.33 T
(refer to the data. Notice the use of the) 180 379.33 T
5 9 Q
(MCDI) 358.35 379.33 T
5 10 Q
(_dataListHead) 384.01 379.33 T
1 F
( \336eld to refer to) 452.7 379.33 T
(the head of the linked list data structure.) 180 366.33 T
4 9 Q
(dataBlockHeader->DBH_listHead = pself->MCDI_dataListHead;) 125 353 T
(dataBlockHeader->DBH_numItems++;) 125 342 T
1 10 Q
(W) 180 323.33 T
(e\325re also updating the \336le header information. While the document object) 189.26 323.33 T
(is handling all \336le management chores for us, we make sure that the \336le\325) 180 310.33 T
(s) 516.35 310.33 T
(header information stays up to date. This makes it easier to deal with) 180 297.33 T
(automatic saves and closing the document.) 180 284.33 T
4 9 Q
(@send ourList::MSG_GEN_DYNAMIC_LIST_ADD_ITEMS\050ordinal+1, 1\051;) 125 271 T
(@send ourList::MSG_GEN_ITEM_GROUP_SET_SINGLE_SELECTION\050ordinal+1,) 125 260 T
( FALSE\051;) 431.5 249 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 125 238 T
( OptrToChunk\050@MCChart\051\051;) 256.5 227 T
(@send ourChart::MSG_MCC_INSERT_BAR\050ordinal, WWFixedToInt\050value\051\051;) 125 216 T
(} /* end of MSG_MCD_INSERT_DATA_ITEM */) 81 205 T
1 10 Q
-0.86 (Here are more cases of objects being referred to by constructed object pointers) 180 186.33 P
(instead of by their names.) 180 173.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "155" 15
%%Page: "156" 16
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(156) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.9) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@method MCDocumentClass, MSG_MCD_DELETE_DATA_ITEM {) 81 642 T
(word) 125 631 T
(ordinal;) 212.5 631 T
(word) 125 620 T
(count;) 212.5 620 T
(ChunkHandle) 125 609 T
(oldItem;) 189.8 609 T
(ListNode) 125 598 T
(*oldNode;) 168.98 598 T
(MemHandle) 125 587 T
(dataListBlock;) 179 587 T
(MemHandle) 125 576 T
(*dataListBlockPtr = &dataListBlock;) 179 576 T
(ChunkHandle) 125 565 T
(tempListItem;) 189.8 565 T
(ListNode) 125 554 T
(*tempNode;) 173.6 554 T
(optr) 125 543 T
(ourList;) 212.5 543 T
(optr) 125 532 T
(ourChart;) 212.5 532 T
(DataBlockHeader *dataBlockHeader;) 125 521 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 510 T
(OptrToChunk\050MCDataList\051\051;) 168.98 499 T
(ordinal = @call ourList::MSG_GEN_ITEM_GROUP_GET_SELECTION\050\051;) 125 481 T
(if \050ordinal==FAKE_LIST_ITEM\051 return;) 125 470 T
(count = ordinal ;) 125 459 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 102.6 448 T
( pself->MCDI_dataFileBlock,) 168.98 437 T
( dataListBlockPtr\051;) 168.98 426 T
(if \050ordinal == 1\051 {) 125 408 T
(oldNode = LMemDerefHandles\050dataListBlock,) 168.98 397 T
( pself->MCDI_dataListHead\051;) 301 386 T
(tempListItem = oldNode->LN_next;) 168.98 375 T
(LMemFreeHandles\050dataListBlock, pself->MCDI_dataListHead\051;) 168.98 364 T
(pself->MCDI_dataListHead = tempListItem;) 168.98 353 T
( }) 125 342 T
(else {) 125 331 T
(for \050tempNode=LMemDerefHandles\050dataListBlock,) 168.98 320 T
( pself->MCDI_dataListHead\051;) 301 309 T
( count > 2;) 168.98 298 T
( --count\051) 168.98 287 T
( {) 168.98 276 T
(tempListItem = tempNode->LN_next;) 212.5 265 T
(tempNode = LMemDerefHandles\050dataListBlock,) 212.5 254 T
( tempListItem\051;) 344 243 T
( }) 168.98 232 T
(oldItem = tempNode->LN_next;) 168.98 221 T
(oldNode = LMemDerefHandles\050dataListBlock, oldItem\051;) 168.98 210 T
(tempNode->LN_next = oldNode->LN_next;) 125 199 T
(LMemFreeHandles\050dataListBlock, oldItem\051;) 125 188 T
( }) 102.6 177 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "156" 16
%%Page: "157" 17
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Altered Handlers) 445.97 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(157) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.9) 546.55 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(dataBlockHeader->DBH_listHead = pself->MCDI_dataListHead;) 125 642 T
(dataBlockHeader->DBH_numItems--;) 125 631 T
(VMDirty\050dataListBlock\051;) 125 620 T
(VMUnlock\050dataListBlock\051;) 125 609 T
(@send ourList::MSG_GEN_DYNAMIC_LIST_REMOVE_ITEMS\050ordinal, 1\051;) 125 598 T
(@send ourList::MSG_GEN_ITEM_GROUP_SET_SINGLE_SELECTION\050ordinal-1,) 125 587 T
( FALSE\051;) 431.5 576 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 125 565 T
( OptrToChunk\050@MCChart\051\051;) 256.5 554 T
(@send ourChart::MSG_MCC_DELETE_BAR\050ordinal-1\051;) 125 543 T
(} /* end of end of MSG_MCD_DELETE_DATA_ITEM */) 81 532 T
(@method MCDocumentClass, MSG_MCD_SET_DATA_ITEM {) 81 521 T
(word) 125 510 T
(ordinal;) 212.5 510 T
(WWFixedAsDWord) 125 499 T
(value;) 206 499 T
(char) 125 488 T
(monikerString[LOCAL_DISTANCE_BUFFER_SIZE];) 212.5 488 T
(word) 125 477 T
(count;) 212.5 477 T
(MemHandle) 125 466 T
(dataListBlock;) 179 466 T
(MemHandle) 125 455 T
(*dataListBlockPtr = &dataListBlock;) 173.6 455 T
(ChunkHandle) 125 444 T
(tempListItem;) 189.8 444 T
(ListNode) 125 433 T
(*tempNode;) 173.6 433 T
(optr) 125 422 T
(ourList;) 212.5 422 T
(optr) 125 411 T
(ourValue;) 212.5 411 T
(optr) 125 400 T
(ourChart;) 212.5 400 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 389 T
(OptrToChunk\050MCDataList\051\051;) 168.98 378 T
(ordinal = @call ourList::MSG_GEN_ITEM_GROUP_GET_SELECTION\050\051;) 102.6 367 T
(if \050ordinal == FAKE_LIST_ITEM\051 return;) 102.6 356 T
(ourValue = ConstructOptr\050pself->GDI_display,) 125 338 T
( OptrToChunk\050MCValue\051\051;) 256.5 327 T
(value = @call ourValue::MSG_GEN_VALUE_GET_VALUE\050\051;) 125 316 T
(VMLock\050pself->GDI_fileHandle,) 125 305 T
( pself->MCDI_dataFileBlock,) 125 294 T
( dataListBlockPtr\051;) 125 283 T
(for \050tempNode = LMemDerefHandles\050dataListBlock,) 125 272 T
( pself->MCDI_dataListHead\051,) 301 261 T
( count = ordinal-1;) 125 250 T
( count > 0;) 125 239 T
( --count\051) 125 228 T
( {) 125 217 T
(tempListItem = tempNode->LN_next;) 168.98 206 T
(tempNode = LMemDerefHandles\050dataListBlock, tempListItem\051;) 168.98 195 T
( }) 125 184 T
(tempNode->LN_data = WWFixedToInt\050value\051;) 125 173 T
(VMDirty\050dataListBlock\051;) 102.6 162 T
(VMUnlock\050dataListBlock\051;) 102.6 151 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "157" 17
%%Page: "158" 18
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(158) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(LocalFixedToAscii\050monikerString, value, 0\051;) 125 642 T
(@call ourList::MSG_GEN_DYNAMIC_LIST_REPLACE_ITEM_TEXT\050) 125 631 T
(ordinal,) 388 620 T
(monikerString\051;) 388 609 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 125 598 T
( OptrToChunk\050@MCChart\051\051;) 256.5 587 T
(@send ourChart::MSG_MCC_RESIZE_BAR\050ordinal-1, WWFixedToInt\050value\051\051;) 125 576 T
(} /* end of MSG_MCD_SET_DATA_ITEM */) 81 565 T
1 10 Q
(These message handlers have been changed in ways similar to that for) 180 546.33 T
1 9 Q
(MSG_MCD_INSERT_DA) 180 533.33 T
(T) 285.34 533.33 T
(A_ITEM) 290.84 533.33 T
1 10 Q
(. W) 326.5 533.33 T
(e won\325) 341.32 533.33 T
(t explore each change; there are) 369.85 533.33 T
(just more cases of using document instance data to refer to data structures) 180 520.33 T
(and constructing optrs to refer to objects.) 180 507.33 T
0 14 Q
(7.10) 134.76 455 T
0 24 Q
(Maintaining the Document) 180 455 T
1 10 Q
-0.28 (W) 180 429.33 P
-0.28 (e have three message handlers to maintain our data structures within the) 189.26 429.33 P
(document \336le whenever the \336le is saved or opened.) 180 416.33 T
4 9 Q
(@method MCDocumentClass, MSG_GEN_DOCUMENT_INITIALIZE_DOCUMENT_FILE {) 81 403 T
(VMBlockHandle) 125 392 T
(chartFileBlock;) 212.5 392 T
(MemHandle) 125 381 T
(dataListBlock;) 212.5 381 T
(MemHandle) 125 370 T
(*dataListBlockPtr = &dataListBlock;) 212.5 370 T
(DataBlockHeader) 125 359 T
(*dataBlockHeader;) 211.4 359 T
(if \050@callsuper\050\051\051 return\050TRUE\051;) 102.6 348 T
(pself = ObjDerefGen\050oself\051;) 102.6 337 T
1 10 Q
-0.4 (Our \336rst message handler is for the case in which we create a new document) 180 318.33 P
(\336le. First we call the superclass behavior) 180 305.33 T
(. W) 368.36 305.33 T
(e do this to give the document\325) 383.18 305.33 T
(s) 523.01 305.33 T
3 F
(GenDocumentClass) 180 292.33 T
1 F
( behavior a chance to create the document \336le. W) 281.66 292.33 T
(e) 507.79 292.33 T
-0.22 (don\325) 180 279.33 P
-0.22 (t know the speci\336cs of how) 198.71 279.33 P
3 F
-0.22 (GenDocumentClass) 323.15 279.33 P
1 F
-0.22 ( handles this message,) 424.81 279.33 P
(and in fact the) 180 266.33 T
3 F
(pself) 250.01 266.33 T
1 F
( pointer may no longer be valid by the time the) 274.83 266.33 T
3 F
-0.54 (@callsuper) 180 253.33 P
1 F
-0.52 ( command returns. T) 235.63 253.33 P
-0.52 (o be safe, we call) 330.17 253.33 P
3 F
-0.54 (ObjDerefGen\050\051) 407.39 253.33 P
1 F
-0.52 ( to update) 483.31 253.33 P
(the) 180 240.33 T
3 F
(pself) 197.78 240.33 T
1 F
( value.) 222.6 240.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "158" 18
%%Page: "159" 19
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(159) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(pself->MCDI_chartMemBlock =) 125 642 T
(ObjDuplicateResource\050OptrToHandle\050@MCChart\051, 0, 0\051;) 212.5 631 T
(chartFileBlock = VMAttach\050pself->GDI_fileHandle,) 125 620 T
( 0,) 256.5 609 T
( pself->MCDI_chartMemBlock\051;) 256.5 598 T
(VMPreserveBlocksHandle\050pself->GDI_fileHandle, chartFileBlock\051;) 125 587 T
1 10 Q
-0.34 (Though the document group is nicely duplicating our display block, we must) 180 568.33 P
-0.44 (duplicate the) 180 555.33 P
1 9 Q
-0.4 (CONTENT) 242.46 555.33 P
1 10 Q
-0.44 ( block ourselves. T) 289.13 555.33 P
-0.44 (o get the block handle of the object) 372.09 555.33 P
(block we want to duplicate, we use) 180 542.33 T
3 F
(OptrT) 342.63 542.33 T
(oHandle\050\051) 373.38 542.33 T
1 F
(, passing) 424.86 542.33 T
3 F
(@MCChart) 468.39 542.33 T
1 F
(,) 523.64 542.33 T
(the object pointer of one of the objects within the block. W) 180 529.33 T
(e duplicate the) 446.32 529.33 T
(entire resource by means of the) 180 516.33 T
3 F
(ObjDuplicateResource\050\051) 327.78 516.33 T
1 F
( routine.) 452.97 516.33 T
(W) 180 496.33 T
(e want the duplicated object block to be saved whenever the document is) 189.26 496.33 T
(saved; we call) 180 483.33 T
3 F
(VMAttach\050\051) 246.5 483.33 T
1 F
( to attach our memory block to the document\325) 306.31 483.33 T
(s) 514.85 483.33 T
(associated) 180 470.33 T
1 9 Q
(VM) 230.38 470.33 T
1 10 Q
( \336le. Finally) 245.37 470.33 T
(, we call) 300.02 470.33 T
3 F
(VMPreserveBlocksHandle\050\051) 340.22 470.33 T
1 F
( to) 483.93 470.33 T
(preserve handles within the object block.) 180 457.33 T
4 9 Q
(pself->MCDI_dataFileBlock = VMAllocLMem\050pself->GDI_fileHandle,) 125 444 T
(LMEM_TYPE_GENERAL,) 344 433 T
(sizeof\050DataBlockHeader\051\051;) 344 422 T
(VMSetMapBlock\050pself->GDI_fileHandle, pself->MCDI_dataFileBlock\051;) 125 411 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 125 400 T
( pself->MCDI_dataFileBlock,) 256.5 389 T
( dataListBlockPtr\051;) 256.5 378 T
(dataBlockHeader->DBH_listHead = NULL;) 125 367 T
(dataBlockHeader->DBH_numItems = 1;) 125 356 T
(dataBlockHeader->DBH_chartBlock = chartFileBlock;) 125 345 T
(VMDirty\050dataListBlock\051;) 125 334 T
(VMUnlock\050dataListBlock\051;) 125 323 T
(return\050FALSE\051;) 102.6 312 T
(} /* end of MSG_GEN_DOCUMENT_INITALIZE_DOCUMENT_FILE */) 81 301 T
1 10 Q
(The rest of the handler corresponds closely the part of our old) 180 282.33 T
1 9 Q
(MSG_GEN_PROCESS_OPEN_APPLICA) 180 269.33 T
(TION) 351.35 269.33 T
1 10 Q
( handler for) 375.35 269.33 T
3 F
(MCProcessClass) 432.57 269.33 T
1 F
(which was in charge of creating new \336les.) 180 256.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "159" 19
%%Page: "160" 20
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(160) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@method MCDocumentClass, MSG_GEN_DOCUMENT_ATTACH_UI_TO_DOCUMENT {) 81 642 T
(MemHandle) 125 631 T
(dataListBlock;) 212.5 631 T
(MemHandle) 125 620 T
(*dataListBlockPtr = &dataListBlock;) 212.5 620 T
(DataBlockHeader *dataBlockHeader;) 125 609 T
(word) 125 598 T
(numItems;) 256.5 598 T
(optr) 125 587 T
(ourList;) 256.5 587 T
(VMBlockHandle) 125 576 T
(chartFileBlock;) 212.5 576 T
(optr) 125 565 T
(ourChart;) 256.5 565 T
(@callsuper\050\051;) 125 554 T
(pself = ObjDerefGen\050oself\051;) 125 543 T
(pself->MCDI_dataFileBlock = VMGetMapBlock\050pself->GDI_fileHandle\051;) 125 532 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 125 521 T
( pself->MCDI_dataFileBlock,) 256.5 510 T
( dataListBlockPtr\051;) 256.5 499 T
(pself->MCDI_dataListHead = dataBlockHeader->DBH_listHead;) 125 488 T
(numItems = dataBlockHeader->DBH_numItems;) 125 477 T
(chartFileBlock = dataBlockHeader->DBH_chartBlock;) 125 466 T
(VMUnlock\050dataListBlock\051;) 125 455 T
1 10 Q
(This portion of code corresponds closely to that part of the old) 180 436.33 T
3 F
(MCProcessClass) 180 423.33 T
1 F
(\325) 265.19 423.33 T
1 9 Q
(MSG_GEN_PROCESS_OPEN_APPLICA) 270.01 423.33 T
(TION) 441.36 423.33 T
1 10 Q
( handler in) 465.36 423.33 T
(charge of extracting information from a chart \336le\325) 180 410.33 T
(s data header) 408.15 410.33 T
(.) 470.2 410.33 T
4 9 Q
(pself->MCDI_chartMemBlock = VMVMBlockToMemBlock\050pself->GDI_fileHandle,) 125 397 T
(chartFileBlock\051;) 388 386 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 125 375 T
( OptrToChunk\050@MCChart\051\051;) 256.5 364 T
(@send self::MSG_VIS_ADD_NON_DISCARDABLE_VM_CHILD\050ourChart, CCO_FIRST\051;) 125 353 T
(ourList = ConstructOptr\050pself->GDI_display,) 125 342 T
(OptrToChunk\050@MCDataList\051\051;) 256.5 331 T
(@send ourList::MSG_GEN_DYNAMIC_LIST_INITIALIZE\050numItems\051;) 125 320 T
(@send ourList::MSG_GEN_ITEM_GROUP_SET_SINGLE_SELECTION\0500, FALSE\051;) 125 309 T
(} /* end of MSG_GEN_DOCUMENT_ATTACH_UI_TO_DOCUMENT */) 81 298 T
1 10 Q
(This portion of code initializes the) 180 279.33 T
1 9 Q
(UI) 339.83 279.33 T
1 10 Q
( in the old manner) 350.83 279.33 T
(, the only difference) 435.47 279.33 T
(being that we must construct the objects\325 optrs.) 180 266.33 T
4 9 Q
(@method MCDocumentClass, MSG_GEN_DOCUMENT_DETACH_UI_FROM_DOCUMENT {) 81 253 T
(optr) 125 242 T
(ourChart;) 256.5 242 T
(@callsuper\050\051;) 102.6 231 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "160" 20
%%Page: "161" 21
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(161) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 125 642 T
( OptrToChunk\050@MCChart\051\051;) 256.5 631 T
(@call ourChart::MSG_VIS_REMOVE_NON_DISCARDABLE\050 VUM_MANUAL \051;) 125 620 T
(}) 81 609 T
1 10 Q
(This message handler removes the document\325) 180 590.33 T
(s chart object from the visual) 389.83 590.33 T
-0.38 (tree preparatory to storing it. The document takes care of all other) 180 577.33 P
1 9 Q
-0.35 (UI) 485.59 577.33 P
1 10 Q
-0.38 ( chores) 496.59 577.33 P
(automatically) 180 564.33 T
(.) 242.61 564.33 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "161" 21
%%Page: "162" 22
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(162) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
81 635.98 531 648 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
81 635.98 531 648 R
7 X
0 0 0 1 0 0 0 K
V
76.5 643.23 617.5 646.73 R
4 X
V
0.5 H
2 Z
N
36 72 576 720 C
0 10 Q
0 X
0 0 0 1 0 0 0 K
(Code Display) 81 629.31 T
(5-) 147.13 629.31 T
(1 MCHRT) 156.02 629.31 T
(.GP) 199.35 629.31 T
4 8 Q
0.64 (name mchrt.app) 81 615.64 S
0.64 (longname \322MyChart\323) 81 598.64 S
0.64 (type appl, process) 81 581.64 S
0.64 (class MCProcessClass) 81 564.64 S
0.64 (appobj MCApp) 81 547.64 S
0.64 (tokenchars \322MCht\323) 81 530.64 S
0.64 (tokenid 0) 81 520.64 S
0.64 (library geos) 81 503.64 S
0.64 (library ui) 81 493.64 S
0.64 (resource APPRESOURCE ui-object) 81 476.64 S
0.64 (resource INTERFACE ui-object) 81 466.64 S
0.64 (resource CONTENT object read-only shared) 81 456.64 S
0.64 (resource DISPLAY ui-object read-only shared) 81 446.64 S
0.64 (resource DOCGROUP object) 81 436.64 S
0.64 (export MCChartClass) 81 419.64 S
0.64 (export MCDocumentClass) 81 409.64 S
81 385.95 531 397.98 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
81 385.95 531 397.98 R
7 X
0 0 0 1 0 0 0 K
V
76.5 393.2 617.5 396.7 R
4 X
V
0.5 H
2 Z
N
36 72 576 720 C
81 355.93 531 367.95 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
81 355.93 531 367.95 R
7 X
0 0 0 1 0 0 0 K
V
76.5 363.18 617.5 366.68 R
4 X
V
0.5 H
2 Z
N
36 72 576 720 C
0 10 Q
0 X
0 0 0 1 0 0 0 K
(Code Display) 81 349.26 T
(5-) 147.13 349.26 T
(2 MCHRT) 156.02 349.26 T
(.GOC) 199.35 349.26 T
4 9 Q
(/**************************************************************) 81 335.93 T
( *) 81 324.93 T
(Copyright \050c\051 GeoWorks 1993 -- All Rights Reserved) 102.6 324.93 T
( *) 81 313.93 T
( * MChrt is a charting application. It maintains a list of) 81 302.93 T
( * numbers and constructs a bar chart to display them.) 81 291.93 T
( *) 81 280.93 T
( * Our process object is in charge of maintaining the data) 81 269.93 T
( * structure which holds the list of numbers.) 81 258.93 T
( *) 81 247.93 T
( **************************************************************/) 81 236.93 T
(@include <stdapp.goh>) 81 218.93 T
54 579.02 72 588.99 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 356.63 63 617.63 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 438.02 72 463.99 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 231.63 63 492.63 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 407.02 72 416.99 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 184.63 63 445.63 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "162" 22
%%Page: "163" 23
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(163) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* CONSTANTS */) 81 642 T
(/* In the list gadget which represents our data, the first item) 81 631 T
( * isn\325t going to represent anything; it\325s just a place holder.) 81 620 T
( * The FAKE_LIST_ITEM constant will be used when checking for this item) 81 609 T
( */) 81 598 T
(#define FAKE_LIST_ITEM) 81 587 T
(0) 205.2 587 T
(/* When drawing the pieces of the chart, we\325ll use the following) 81 569 T
( * constants to compute the coordinates at which to draw.) 81 558 T
( */) 81 547 T
(#define VIEW_RIGHT) 81 536 T
(360) 178.2 536 T
(/* Width of the Chart View */) 194.4 536 T
(#define VIEW_BOTTOM) 81 525 T
(288) 183.6 525 T
(/* Height of Chart View */) 199.8 525 T
(#define CHART_BOTTOM) 81 514 T
(268) 194.4 514 T
(/* y = 0 line of Chart */) 210.6 514 T
(#define CHART_LEFT 20) 81 503 T
(/* Left bound of Leftmost bar */) 194.4 503 T
(#define BAR_WIDTH) 81 492 T
(30) 172.8 492 T
(/* Width of each bar */) 183.6 492 T
(#define BAR_WIDTH_ALLOW) 81 481 T
(36) 205.2 481 T
(/* Distance between left edges of bars */) 216 481 T
(#define BORDER_MARGIN) 81 470 T
(10) 194.4 470 T
(/* Arbitrary margin width at edges */) 205.2 470 T
(/* The following constants are the document protocol. If we ever change) 81 452 T
( * our document format, we should increment either the major or minor) 81 441 T
( * protocol number.) 81 430 T
( */) 81 419 T
(#define MC_DOCUMENT_PROTOCOL_MAJOR 0) 81 408 T
(#define MC_DOCUMENT_PROTOCOL_MINOR 1) 81 397 T
(@class) 81 379 T
(MCProcessClass, GenProcessClass;) 113.4 379 T
(@endc /* end of MCProcessClass definition */) 81 368 T
(@class MCDocumentClass, GenDocumentClass;) 81 350 T
(/* For information about the messages listed below, see the) 81 339 T
( * headers for their handlers, later in this file.) 81 328 T
( */) 81 317 T
(@message \050GEN_DYNAMIC_LIST_QUERY_MSG\051 MSG_MCD_SET_DATA_ITEM_MONIKER;) 102.6 306 T
(@message void) 102.6 295 T
(MSG_MCD_DELETE_DATA_ITEM\050\051;) 178.2 295 T
(@message void MSG_MCD_INSERT_DATA_ITEM\050\051;) 102.6 284 T
(@message void) 102.6 273 T
(MSG_MCD_SET_DATA_ITEM\050\051;) 172.8 273 T
(/* MCDI_dataFileBlock: handle of map block, where we store a linked list. */) 81 262 T
(@instance) 102.6 251 T
(VMBlockHandle) 156.6 251 T
(MCDI_dataFileBlock;) 232.2 251 T
(/* MCDI_dataListHead: handle of head of linked list. */) 81 240 T
(@instance) 102.6 229 T
(ChunkHandle) 156.6 229 T
(MCDI_dataListHead;) 221.4 229 T
(/* MCDI_chartMemBlock: Object block holding our MCChart object. */) 81 218 T
(@instance) 102.6 207 T
(MemHandle) 156.6 207 T
(MCDI_chartMemBlock;) 210.6 207 T
(@endc /* end of MCDocumentClass definition */) 81 196 T
54 398.33 72 415.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 182.99 63 443.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 370.37 72 380.33 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 147.98 63 408.98 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 188.38 72 357.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 124.99 63 385.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "163" 23
%%Page: "164" 24
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(164) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@class MCChartClass, VisClass;) 81 642 T
(/* For information about the messages listed below, see the) 81 631 T
( * headers for their handlers, later in this file.) 81 620 T
( */) 81 609 T
(@message void) 102.6 598 T
(MSG_MCC_INSERT_BAR\050word ordinal, word value\051;) 178.2 598 T
(@message void) 102.6 587 T
(MSG_MCC_DELETE_BAR\050word ordinal\051;) 178.2 587 T
(@message void) 102.6 576 T
(MSG_MCC_RESIZE_BAR\050word ordinal, word value\051;) 178.2 576 T
(/* MCCI_numBars:) 81 565 T
(The number of bars in the chart. Internal. */) 167.4 565 T
(@instance word MCCI_numBars = 0;) 102.6 554 T
(/* MCCI_barArray:) 81 543 T
(Chunk handle of array to hold bar info. */) 172.8 543 T
(@instance ChunkHandle MCCI_barArray;) 102.6 532 T
(@endc /* end of MCChartClass definition */) 81 521 T
(@classdecl) 81 503 T
(MCProcessClass, neverSaved;) 140.4 503 T
(@classdecl) 81 492 T
(MCChartClass;) 140.4 492 T
(@classdecl) 81 481 T
(MCDocumentClass;) 140.4 481 T
(/* Global STRUCTURES and VARIABLES */) 81 463 T
(/* This structure will hold information about our document, and will form) 81 445 T
( * the header of a block in our data file. The first item of this structure) 81 434 T
( * MUST be an LMemBlockHeader.) 81 423 T
( */) 81 412 T
(typedef struct {) 81 401 T
(LMemBlockHeader) 102.6 390 T
( DBH_standardHeader;) 183.6 390 T
(word) 102.6 379 T
(DBH_numItems;) 145.8 379 T
(/* Number of data items */) 216 379 T
(ChunkHandle) 102.6 368 T
(DBH_listHead;) 167.4 368 T
(/* Head of linked list */) 243 368 T
(VMBlockHandle) 102.6 357 T
(DBH_chartBlock; /* Block where MCChart is stored */) 178.2 357 T
(} DataBlockHeader;) 81 346 T
(/* The data points which are to be charted are stored in) 81 328 T
( * a linked list of chunks, all of which are contained within) 81 317 T
( * a single block of memory. Each element of the list will be) 81 306 T
( * stored in a ListNode structure.) 81 295 T
( */) 81 284 T
(typedef struct {) 81 273 T
(word) 102.6 262 T
(LN_data;) 145.8 262 T
(ChunkHandle) 102.6 251 T
(LN_next;) 162 251 T
(} ListNode;) 81 240 T
54 478.38 72 488.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 255.99 63 516.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 354.38 72 364.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 131.99 63 392.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "164" 24
%%Page: "165" 25
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(165) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* OBJECT Resources */) 81 642 T
(/* APPRESOURCE will hold the application object and other information) 81 631 T
( which the system will want to load when it wants to find out about) 81 620 T
( the application but doesn\325t need to run the application. */) 81 609 T
(@start) 81 598 T
(AppResource;) 113.4 598 T
(@object GenApplicationClass MCApp = {) 81 587 T
( GI_visMoniker = list { @MCTextMoniker }) 81 576 T
( GI_comp = @MCPrimary;) 81 565 T
( gcnList\050MANUFACTURER_ID_GEOWORKS,GAGCNLT_WINDOWS\051 = @MCPrimary;) 81 554 T
( gcnList\050MANUFACTURER_ID_GEOWORKS,MGCNLT_ACTIVE_LIST\051 =) 81 543 T
(@MCDocumentControl, @MCDisplayControl;) 102.6 532 T
( gcnList\050MANUFACTURER_ID_GEOWORKS,MGCNLT_APP_STARTUP\051 =) 81 521 T
(@MCDocumentControl;) 102.6 510 T
( gcnList\050MANUFACTURER_ID_GEOWORKS,GAGCNLT_SELF_LOAD_OPTIONS\051 =) 81 499 T
(@MCDocumentControl, @MCDisplayControl;) 102.6 488 T
(}) 81 477 T
(@visMoniker MCTextMoniker = \322MyChart Application\323;) 81 459 T
(@end) 81 441 T
(AppResource;) 102.6 441 T
(/* The INTERFACE resource holds the bulk of our Generic UI gadgetry. */) 81 423 T
(@start Interface;) 81 412 T
(@object GenPrimaryClass MCPrimary = {) 81 401 T
(GI_comp = @MCFileGroup, @MCWindowGroup, @MCDisplayGroup;) 102.6 390 T
(/*) 102.6 379 T
( * When the specific UI permits, let\325s not show the menu bar on) 102.6 368 T
( * startup; this can be useful on the small screen of a pen-based) 102.6 357 T
( * system since it gives some extra space.) 102.6 346 T
( */) 102.6 335 T
(ATTR_GEN_DISPLAY_MENU_BAR_POPPED_OUT;) 102.6 324 T
(HINT_DISPLAY_MENU_BAR_HIDDEN_ON_STARTUP;) 102.6 313 T
(}) 81 302 T
(@object GenInteractionClass MCFileGroup = {) 81 284 T
(GI_comp = @MCDocumentControl;) 102.6 273 T
(GII_visibility = GIV_POPUP;) 102.6 262 T
(ATTR_GEN_INTERACTION_GROUP_TYPE = GIGT_FILE_MENU;) 102.6 251 T
(}) 81 240 T
(@object GenDocumentControlClass MCDocumentControl = {) 81 222 T
(GDCI_documentToken = {\322MCht\323, MANUFACTURER_ID_GEOWORKS } ;) 102.6 211 T
(GDCI_noNameText = \322No Document\323;) 102.6 200 T
(GDCI_documentGroup = MCDocumentGroup;) 102.6 189 T
(GDCI_attrs = @default | GDCA_MULTIPLE_OPEN_FILES;) 102.6 178 T
(GDCI_features = @default & ~GDCF_NAME_ON_PRIMARY;) 102.6 167 T
(}) 81 156 T
54 485.38 72 550.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 317.99 63 578.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 306 72 397.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 164.99 63 425.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 239.38 72 291.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 58.99 63 319.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 148 72 229.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 -3.01 63 257.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "165" 25
%%Page: "166" 26
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(166) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@object GenInteractionClass MCWindowGroup = {) 81 642 T
(GI_comp = @MCDisplayControl;) 102.6 631 T
(GII_visibility = GIV_POPUP;) 102.6 620 T
(ATTR_GEN_INTERACTION_GROUP_TYPE = GIGT_WINDOW_MENU;) 102.6 609 T
(}) 81 598 T
(@object GenDisplayControlClass MCDisplayControl = {}) 81 580 T
(@object GenDisplayGroupClass MCDisplayGroup = { }) 81 562 T
(@end) 81 544 T
(Interface;) 108 544 T
(/* The DISPLAY resource is a template which will be duplicated for) 81 526 T
( * each open document. It contains all generic UI associated with) 81 515 T
( * a document.) 81 504 T
( */) 81 493 T
(@start) 81 482 T
(Display;) 113.4 482 T
(@object GenDisplayClass MCDisplay = {) 81 471 T
(GI_comp = @MCLeftClump, @MCChartView;) 102.6 460 T
(GI_states = @default & ~GS_USABLE;) 102.6 449 T
(ATTR_GEN_DISPLAY_NOT_MINIMIZABLE;) 102.6 438 T
(HINT_ORIENT_CHILDREN_HORIZONTALLY;) 102.6 427 T
(}) 81 416 T
(@object GenInteractionClass MCLeftClump = {) 81 398 T
(GI_comp = @MCDataList, @MCAddTrigger, @MCDeleteTrigger,) 102.6 387 T
( @MCChangeTrigger, @MCValue;) 125 376 T
(}) 81 365 T
(@object GenViewClass MCChartView = {) 81 347 T
(GVI_horizAttrs = @default | GVDA_NO_SMALLER_THAN_CONTENT |) 102.6 336 T
( GVDA_NO_LARGER_THAN_CONTENT;) 145.8 325 T
(GVI_vertAttrs = @default | GVDA_NO_SMALLER_THAN_CONTENT |) 102.6 314 T
(GVDA_NO_LARGER_THAN_CONTENT;) 145.8 303 T
(}) 81 292 T
(@end) 81 274 T
(Display;) 102.6 274 T
(/* The CONTENT resource is a template resource, and a duplicate of this) 81 256 T
( * resource will be made for each newly created document.) 81 245 T
( */) 81 234 T
(@start Content, notDetachable;) 81 223 T
(@object MCChartClass MCChart = {) 81 205 T
(VI_bounds = { 0, 0, VIEW_RIGHT, VIEW_BOTTOM };) 102.6 194 T
(MCCI_barArray = BarDataChunk;) 102.6 183 T
(}) 81 172 T
(@chunk word BarDataChunk[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};) 81 154 T
54 598.03 72 648 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 415.64 63 676.64 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 577.38 72 587.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 354.99 63 615.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 560.34 72 569.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 336.99 63 597.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 415 72 489.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 256.99 63 517.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 271.38 72 281.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 48.99 63 309.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 220.38 72 230.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 -2.01 63 258.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "166" 26
%%Page: "167" 27
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(167) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(@end) 81 642 T
(Content;) 108 642 T
(@start) 81 624 T
(Display;) 118.8 624 T
(@object GenDynamicListClass MCDataList = {) 81 613 T
(GIGI_selection = FAKE_LIST_ITEM;) 102.6 602 T
(GIGI_numSelections = 1;) 102.6 591 T
(GIGI_applyMsg = 0;) 102.6 580 T
(GIGI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 569 T
(GDLI_numItems = 1;) 102.6 558 T
(GDLI_queryMsg = MSG_MCD_SET_DATA_ITEM_MONIKER;) 102.6 547 T
(HINT_ITEM_GROUP_SCROLLABLE;) 102.6 536 T
(}) 81 525 T
(@visMoniker FakeItemMoniker = \322Data:\323;) 81 507 T
(@localize \322This string will appear at the head of the list\323;) 81 496 T
(@object GenTriggerClass MCAddTrigger = {) 81 478 T
(GI_visMoniker = \322Add\323;) 102.6 467 T
(GTI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 456 T
(GTI_actionMsg = MSG_MCD_INSERT_DATA_ITEM;) 102.6 445 T
(}) 81 434 T
(@object GenTriggerClass MCChangeTrigger = {) 81 416 T
(GI_visMoniker = \322Change\323;) 102.6 405 T
(GTI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 394 T
(GTI_actionMsg = MSG_MCD_SET_DATA_ITEM;) 102.6 383 T
(}) 81 372 T
(@object GenTriggerClass MCDeleteTrigger = {) 81 354 T
(GI_visMoniker = \322Delete\323;) 102.6 343 T
(GTI_destination = \050TO_OBJ_BLOCK_OUTPUT\051;) 102.6 332 T
(GTI_actionMsg = MSG_MCD_DELETE_DATA_ITEM;) 102.6 321 T
(}) 81 310 T
(@object GenValueClass MCValue = {) 81 281 T
(GVLI_minimum = MakeWWFixed\0500\051;) 102.6 270 T
(GVLI_maximum = MakeWWFixed\0500x7ffe\051;) 102.6 259 T
(GVLI_value = MakeWWFixed\050123\051;) 102.6 248 T
(}) 81 237 T
(@end) 81 219 T
(Display;) 108 219 T
54 621.38 72 631.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 398.99 63 659.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 566.38 72 576.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 343.99 63 604.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 453.38 72 463.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 230.99 63 491.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 391.38 72 401.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 168.99 63 429.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 329.38 72 339.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 106.99 63 367.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 216.38 72 226.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 -6.01 63 254.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "167" 27
%%Page: "168" 28
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(168) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* The DOCGROUP resource contains our GenDocumentGroup object, and) 81 642 T
( * will contain any GenDocument objects created by the GenDocumentGroup.) 81 631 T
( */) 81 620 T
(@start) 81 609 T
(DocGroup;) 118.8 609 T
(@object GenDocumentGroupClass MCDocumentGroup = {) 81 598 T
(GDGI_attrs = \050@default | GDGA_VM_FILE_CONTAINS_OBJECTS \051;) 102.6 587 T
(GDGI_untitledName = \322UntitledChart\323;) 102.6 576 T
(GDGI_documentClass = \050ClassStruct *\051 &MCDocumentClass;) 102.6 565 T
(GDGI_documentControl = MCDocumentControl;) 102.6 554 T
(GDGI_genDisplayGroup = MCDisplayGroup;) 102.6 543 T
(GDGI_genView = MCChartView;) 102.6 532 T
(GDGI_genDisplay = MCDisplay;) 102.6 521 T
(GDGI_protocolMajor = MC_DOCUMENT_PROTOCOL_MAJOR;) 102.6 510 T
(GDGI_protocolMinor = MC_DOCUMENT_PROTOCOL_MINOR;) 102.6 499 T
(}) 81 488 T
(@end) 81 470 T
(DocGroup;) 108 470 T
(/* CODE for MCDocumentClass */) 81 452 T
(/* MSG_MCD_SET_DATA_ITEM_MONIKER for MCDocumentClass) 81 434 T
(SYNOPSIS: Set the moniker for one of our Data List\325s items.) 102.6 423 T
(CONTEXT: The Data List will send this message to the process) 102.6 412 T
( whenever it needs to display the moniker of a given) 125 401 T
( item. We should respond with one of the) 125 390 T
( MSG_GEN_DYNAMIC_LIST_REPLACE_ITEM_... messages.) 125 379 T
(PARAMS: void \050optr list, word item\051) 102.6 368 T
(*/) 81 357 T
(@method MCDocumentClass, MSG_MCD_SET_DATA_ITEM_MONIKER {) 81 346 T
(/* If we\325re looking for the moniker of the \322Data:\323 item,) 81 335 T
( * just return that moniker. Otherwise, look up the) 81 324 T
( * numerical value of the item as stored in the linked list.) 81 313 T
( */) 81 302 T
(if \050item==FAKE_LIST_ITEM\051 {) 102.6 291 T
(optr) 125 280 T
(moniker;) 152 280 T
(moniker = ConstructOptr\050OptrToHandle\050list\051,) 125 269 T
(OptrToChunk\050@FakeItemMoniker\051\051;) 168.98 258 T
(@send list::MSG_GEN_DYNAMIC_LIST_REPLACE_ITEM_MONIKER_OPTR\050) 125 247 T
(FAKE_LIST_ITEM, moniker\051;}) 168.98 236 T
54 606.38 72 616.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 383.99 63 644.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 492.38 72 605.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 372.99 63 633.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 467.38 72 477.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 244.99 63 505.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 232.38 72 353.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 120.99 63 381.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "168" 28
%%Page: "169" 29
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(169) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(else /* item > FAKE_LIST_ITEM */ {) 102.6 642 T
(ChunkHandle) 125 631 T
(tempListItem;) 189.8 631 T
(ListNode) 125 620 T
(*tempNode;) 173.6 620 T
(char) 125 609 T
(monikerString[LOCAL_DISTANCE_BUFFER_SIZE];) 168.98 609 T
(word) 125 598 T
(data;) 168.98 598 T
(MemHandle) 125 587 T
(dataListBlock;) 173.6 587 T
(MemHandle) 125 576 T
(*dataListBlockPtr = &dataListBlock;) 173.6 576 T
(word) 125 565 T
(ordinal = item;) 168.98 565 T
(VMLock\050pself->GDI_fileHandle,) 125 547 T
( pself->MCDI_dataFileBlock,) 125 536 T
( dataListBlockPtr\051;) 125 525 T
(for\050tempNode = LMemDerefHandles\050dataListBlock,) 125 507 T
(pself->MCDI_dataListHead\051;) 212.5 496 T
( ordinal > 1;) 125 485 T
( --ordinal\051) 125 474 T
({) 145.8 463 T
( tempListItem = tempNode->LN_next;) 145.8 452 T
( tempNode = LMemDerefHandles\050dataListBlock, tempListItem\051;) 145.8 441 T
(}) 145.8 430 T
(data = tempNode->LN_data;) 125 419 T
(VMUnlock\050dataListBlock\051;) 125 408 T
(LocalFixedToAscii\050monikerString, MakeWWFixed\050data\051, 0\051;) 125 390 T
(@call list::MSG_GEN_DYNAMIC_LIST_REPLACE_ITEM_TEXT\050) 125 379 T
( item, monikerString\051;) 212.5 368 T
(}) 102.6 357 T
(} /* end of MSG_MCD_SET_DATA_ITEM_MONIKER */) 81 346 T
54 405 72 648 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 328 63 676.64 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "169" 29
%%Page: "170" 30
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(170) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* MSG_MCD_INSERT_DATA_ITEM for MCDocumentClass) 81 642 T
( *) 81 631 T
( *) 81 620 T
(SYNOPSIS: Add a new number to our list of data.) 102.6 620 T
( *) 81 609 T
(CONTEXT: User wants to add a new piece of data.) 102.6 609 T
( *) 81 598 T
(PARAMS: void\050void\051) 102.6 598 T
( */) 81 587 T
(@method MCDocumentClass, MSG_MCD_INSERT_DATA_ITEM {) 81 576 T
(ChunkHandle) 102.6 565 T
(newListItem;) 167.4 565 T
(ListNode) 102.6 554 T
(*newNode;) 151.2 554 T
(WWFixedAsDWord) 102.6 543 T
(value;) 178.2 543 T
(word) 102.6 532 T
(ordinal;) 145.8 532 T
(MemHandle) 102.6 521 T
(dataListBlock;) 156.6 521 T
(MemHandle) 102.6 510 T
(*dataListBlockPtr = &dataListBlock;) 156.6 510 T
(optr) 102.6 499 T
(ourList;) 145.8 499 T
(optr) 102.6 488 T
(ourValue;) 145.8 488 T
(optr) 102.6 477 T
(ourChart;) 145.8 477 T
(DataBlockHeader *dataBlockHeader;) 102.6 466 T
(/* Query list and data objects to find out where to insert item) 81 455 T
( * and what value to insert there.) 81 444 T
( */) 81 433 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 422 T
(OptrToChunk\050@MCDataList\051\051;) 168.98 411 T
(ordinal = @call ourList::MSG_GEN_ITEM_GROUP_GET_SELECTION\050\051;) 102.6 400 T
(ourValue = ConstructOptr\050pself->GDI_display,) 102.6 389 T
( OptrToChunk\050@MCValue\051\051;) 168.98 378 T
(value = @call ourValue::MSG_GEN_VALUE_GET_VALUE\050\051;) 102.6 367 T
(/* Lock the data block so we can insert data into the linked list. */) 81 349 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 102.6 338 T
( pself->MCDI_dataFileBlock,) 145.8 327 T
( dataListBlockPtr\051;) 168.98 316 T
(/* Create a new linked list element. */) 81 298 T
(newListItem = LMemAlloc\050dataListBlock, sizeof\050ListNode\051\051;) 102.6 287 T
(newNode = LMemDerefHandles\050dataListBlock, newListItem\051;) 102.6 276 T
(newNode->LN_data = WWFixedToInt\050value\051;) 102.6 265 T
54 483.38 72 583.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 350.99 63 611.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 144 72 569.97 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 142.97 63 598.61 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "170" 30
%%Page: "171" 31
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(171) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* Check to see if the item we\325re adding will be the) 81 642 T
( * new head of the data list and handle that case.) 81 631 T
( */) 81 620 T
(if \050ordinal==FAKE_LIST_ITEM\051) 102.6 609 T
( {) 102.6 598 T
(newNode->LN_next = pself->MCDI_dataListHead;) 125 587 T
(pself->MCDI_dataListHead = newListItem;) 125 576 T
( }) 102.6 565 T
(else) 102.6 554 T
(/* We\325re not adding to the head of the list. Traverse the) 81 543 T
( * list using the tempListItem and tempNode variables, then) 81 532 T
( * insert the new item.) 81 521 T
( */) 81 510 T
( {) 102.6 499 T
(ListNode) 125 488 T
(*tempNode;) 173.6 488 T
(ChunkHandle) 125 477 T
(tempListItem;) 189.8 477 T
(word) 125 466 T
(count = ordinal;) 168.98 466 T
(for \050tempNode = LMemDerefHandles\050dataListBlock,) 125 448 T
( pself->MCDI_dataListHead\051;) 212.5 437 T
( count > 1;) 125 426 T
( --count\051) 125 415 T
( {) 125 404 T
(tempListItem = tempNode->LN_next;) 145.8 393 T
(tempNode = LMemDerefHandles\050dataListBlock,) 145.8 382 T
( tempListItem\051;) 212.5 371 T
( }) 125 360 T
(newNode->LN_next = tempNode->LN_next;) 125 349 T
(tempNode->LN_next = newListItem;) 125 338 T
( }) 102.6 327 T
(dataBlockHeader->DBH_listHead = pself->MCDI_dataListHead;) 102.6 309 T
(dataBlockHeader->DBH_numItems++;) 102.6 298 T
(/* We\325ve changed the data, so before we unlock the block, we mark) 81 280 T
( * it dirty.) 81 269 T
( */) 81 258 T
(VMDirty\050dataListBlock\051;) 102.6 247 T
(VMUnlock\050dataListBlock\051;) 102.6 236 T
(/* Update the data list gadget. */) 81 218 T
(@send ourList::MSG_GEN_DYNAMIC_LIST_ADD_ITEMS\050ordinal+1, 1\051;) 102.6 207 T
(@send ourList::MSG_GEN_ITEM_GROUP_SET_SINGLE_SELECTION\050ordinal+1,) 102.6 196 T
( FALSE\051;) 256.5 185 T
54 144 72 478.97 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 140.97 63 507.61 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "171" 31
%%Page: "172" 32
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(172) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* Update the chart */) 81 642 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 102.6 631 T
( OptrToChunk\050@MCChart\051\051;) 168.98 620 T
(@send ourChart::MSG_MCC_INSERT_BAR\050ordinal, WWFixedToInt\050value\051\051;) 102.6 609 T
(} /* end of MSG_MCD_INSERT_DATA_ITEM */) 81 598 T
(/* MSG_MCD_DELETE_DATA_ITEM for MCDocumentClass) 81 580 T
( *) 81 569 T
( *) 81 558 T
(SYNOPSIS: Destroys one data item.) 102.6 558 T
( *) 81 547 T
(CONTEXT: User has just clicked on the \322Delete\323 trigger.) 102.6 547 T
( *) 81 536 T
(PARAMS: void \050void\051) 102.6 536 T
( */) 81 525 T
(@method MCDocumentClass, MSG_MCD_DELETE_DATA_ITEM {) 81 514 T
(word) 102.6 503 T
(ordinal;) 145.8 503 T
(word) 102.6 492 T
(count;) 145.8 492 T
(ChunkHandle) 102.6 481 T
(oldItem;) 167.4 481 T
(ListNode) 102.6 470 T
(*oldNode;) 145.8 470 T
(MemHandle) 102.6 459 T
(dataListBlock;) 156.6 459 T
(MemHandle) 102.6 448 T
(*dataListBlockPtr = &dataListBlock;) 156.6 448 T
(ChunkHandle) 102.6 437 T
(tempListItem;) 167.4 437 T
(ListNode) 102.6 426 T
(*tempNode;) 151.2 426 T
(optr) 102.6 415 T
(ourList;) 145.8 415 T
(optr) 102.6 404 T
(ourChart;) 145.8 404 T
(DataBlockHeader *dataBlockHeader;) 102.6 393 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 375 T
(OptrToChunk\050MCDataList\051\051;) 168.98 364 T
(ordinal = @call ourList::MSG_GEN_ITEM_GROUP_GET_SELECTION\050\051;) 102.6 346 T
(if \050ordinal==FAKE_LIST_ITEM\051 return;) 102.6 335 T
(count = ordinal ;) 102.6 324 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 102.6 306 T
( pself->MCDI_dataFileBlock,) 168.98 295 T
( dataListBlockPtr\051;) 168.98 284 T
(if \050ordinal == 1\051 {) 102.6 266 T
(oldNode = LMemDerefHandles\050dataListBlock,) 125 255 T
( pself->MCDI_dataListHead\051;) 189 244 T
(tempListItem = oldNode->LN_next;) 125 233 T
(LMemFreeHandles\050dataListBlock, pself->MCDI_dataListHead\051;) 125 222 T
(pself->MCDI_dataListHead = tempListItem;) 125 211 T
( }) 102.6 200 T
54 198.38 72 521.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 159 63 549.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "172" 32
%%Page: "173" 33
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(173) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(else {) 102.6 642 T
(for \050tempNode=LMemDerefHandles\050dataListBlock,) 125 631 T
( pself->MCDI_dataListHead\051;) 189 620 T
( count > 2;) 125 609 T
( --count\051) 125 598 T
( {) 125 587 T
(tempListItem = tempNode->LN_next;) 145.8 576 T
(tempNode = LMemDerefHandles\050dataListBlock,) 145.8 565 T
( tempListItem\051;) 212.5 554 T
( }) 125 543 T
(oldItem = tempNode->LN_next;) 125 532 T
(oldNode = LMemDerefHandles\050dataListBlock, oldItem\051;) 125 521 T
(tempNode->LN_next = oldNode->LN_next;) 125 503 T
(LMemFreeHandles\050dataListBlock, oldItem\051;) 125 492 T
( }) 102.6 481 T
(dataBlockHeader->DBH_listHead = pself->MCDI_dataListHead;) 102.6 463 T
(dataBlockHeader->DBH_numItems--;) 102.6 452 T
(VMDirty\050dataListBlock\051;) 102.6 434 T
(VMUnlock\050dataListBlock\051;) 102.6 423 T
(@send ourList::MSG_GEN_DYNAMIC_LIST_REMOVE_ITEMS\050ordinal, 1\051;) 102.6 405 T
(@send ourList::MSG_GEN_ITEM_GROUP_SET_SINGLE_SELECTION\050ordinal-1,) 102.6 394 T
( FALSE\051;) 256.5 383 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 102.6 365 T
( OptrToChunk\050@MCChart\051\051;) 168.98 354 T
(@send ourChart::MSG_MCC_DELETE_BAR\050ordinal-1\051;) 102.6 336 T
(} /* end of end of MSG_MCD_DELETE_DATA_ITEM */) 81 325 T
54 317.03 72 648 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 306 63 676.64 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "173" 33
%%Page: "174" 34
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(174) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* MSG_MCD_SET_DATA_ITEM for MCDocumentClass) 81 642 T
( *) 81 631 T
( *) 81 620 T
(SYNOPSIS: Change the data number of one item in the data list.) 102.6 620 T
( *) 81 609 T
(CONTEXT: User has clicked the \322Change\323 button.) 102.6 609 T
( *) 81 598 T
(PARAMS: void\050void\051) 102.6 598 T
( */) 81 587 T
(@method MCDocumentClass, MSG_MCD_SET_DATA_ITEM {) 81 576 T
(word) 102.6 565 T
(ordinal;) 145.8 565 T
(WWFixedAsDWord) 102.6 554 T
(value;) 183.6 554 T
(char) 102.6 543 T
(monikerString[LOCAL_DISTANCE_BUFFER_SIZE];) 145.8 543 T
(word) 102.6 532 T
(count;) 145.8 532 T
(MemHandle) 102.6 521 T
(dataListBlock;) 156.6 521 T
(MemHandle) 102.6 510 T
(*dataListBlockPtr = &dataListBlock;) 151.2 510 T
(ChunkHandle) 102.6 499 T
(tempListItem;) 167.4 499 T
(ListNode) 102.6 488 T
(*tempNode;) 151.2 488 T
(optr) 102.6 477 T
(ourList;) 145.8 477 T
(optr) 102.6 466 T
(ourValue;) 145.8 466 T
(optr) 102.6 455 T
(ourChart;) 145.8 455 T
(/* Find out which item we\325re changing. */) 81 437 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 426 T
(OptrToChunk\050MCDataList\051\051;) 168.98 415 T
(ordinal = @call ourList::MSG_GEN_ITEM_GROUP_GET_SELECTION\050\051;) 102.6 404 T
(if \050ordinal == FAKE_LIST_ITEM\051 return;) 102.6 393 T
(/* Find out what the item\325s new value should be. */) 81 375 T
(ourValue = ConstructOptr\050pself->GDI_display,) 102.6 364 T
( OptrToChunk\050MCValue\051\051;) 168.98 353 T
(value = @call ourValue::MSG_GEN_VALUE_GET_VALUE\050\051;) 102.6 342 T
(/* Lock the data block so that we can change the data. */) 81 324 T
(VMLock\050pself->GDI_fileHandle,) 102.6 313 T
( pself->MCDI_dataFileBlock,) 102.6 302 T
( dataListBlockPtr\051;) 102.6 291 T
(/* Find the appropriate item in the linked list and change its value. */) 81 280 T
(for \050tempNode = LMemDerefHandles\050dataListBlock,) 102.6 269 T
( pself->MCDI_dataListHead\051,) 189 258 T
( count = ordinal-1;) 102.6 247 T
( count > 0;) 102.6 236 T
( --count\051) 102.6 225 T
( {) 102.6 214 T
(tempListItem = tempNode->LN_next;) 125 203 T
(tempNode = LMemDerefHandles\050dataListBlock, tempListItem\051;) 125 192 T
( }) 102.6 181 T
(tempNode->LN_data = WWFixedToInt\050value\051;) 102.6 170 T
54 170.38 72 583.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 156 63 611.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "174" 34
%%Page: "175" 35
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(175) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* We changed the data so mark it dirty before unlocking it. */) 81 642 T
(VMDirty\050dataListBlock\051;) 102.6 631 T
(VMUnlock\050dataListBlock\051;) 102.6 620 T
(/* Update the data list gadget. */) 81 602 T
(LocalFixedToAscii\050monikerString, value, 0\051;) 102.6 591 T
(@call ourList::MSG_GEN_DYNAMIC_LIST_REPLACE_ITEM_TEXT\050) 102.6 580 T
(ordinal,) 232.2 569 T
(monikerString\051;) 232.2 558 T
(/* Update the chart. */) 81 540 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 102.6 529 T
( OptrToChunk\050@MCChart\051\051;) 168.98 518 T
(@send ourChart::MSG_MCC_RESIZE_BAR\050ordinal-1, WWFixedToInt\050value\051\051;) 102.6 507 T
(} /* end of MSG_MCD_SET_DATA_ITEM */) 81 496 T
(/* MSG_GEN_DOCUMENT_INITIALIZE_DOCUMENT_FILE for MCDocumentClass) 81 478 T
( *) 81 467 T
( *) 81 456 T
(SYNOPSIS: Duplicate blocks and create a blank header.) 102.6 456 T
( *) 81 445 T
(CONTEXT: Creating a new document.) 102.6 445 T
( *) 81 434 T
(PARAMS: Boolean\050void\051;) 102.6 434 T
( */) 81 423 T
(@method MCDocumentClass, MSG_GEN_DOCUMENT_INITIALIZE_DOCUMENT_FILE {) 81 412 T
(VMBlockHandle) 102.6 401 T
(chartFileBlock;) 178.2 401 T
(MemHandle) 102.6 390 T
(dataListBlock;) 156.6 390 T
(MemHandle) 102.6 379 T
(*dataListBlockPtr = &dataListBlock;) 156.6 379 T
(DataBlockHeader) 102.6 368 T
(*dataBlockHeader;) 189 368 T
(/* If superclass hits an error while trying to create the file, return) 81 350 T
( * immediately, signalling that we hit an error.) 81 339 T
( */) 81 328 T
(if \050@callsuper\050\051\051 return\050TRUE\051;) 102.6 317 T
(pself = ObjDerefGen\050oself\051;) 102.6 306 T
(/* Create the block which will hold our MCChart. */) 81 288 T
(pself->MCDI_chartMemBlock =) 102.6 277 T
(ObjDuplicateResource\050OptrToHandle\050@MCChart\051, 0, 0\051;) 145.8 266 T
(chartFileBlock = VMAttach\050pself->GDI_fileHandle,) 102.6 255 T
( 0,) 168.98 244 T
( pself->MCDI_chartMemBlock\051;) 168.98 233 T
(VMPreserveBlocksHandle\050pself->GDI_fileHandle,) 102.6 222 T
( chartFileBlock\051;) 145.8 211 T
54 492.38 72 638.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 405.99 63 666.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 210.38 72 419.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 186.99 63 447.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "175" 35
%%Page: "176" 36
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(176) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* Create the block which will hold our linked list */) 81 642 T
(pself->MCDI_dataFileBlock = VMAllocLMem\050pself->GDI_fileHandle,) 102.6 631 T
(LMEM_TYPE_GENERAL,) 212.5 620 T
(sizeof\050DataBlockHeader\051\051;) 212.5 609 T
(VMSetMapBlock\050pself->GDI_fileHandle, pself->MCDI_dataFileBlock\051;) 102.6 598 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 102.6 587 T
( pself->MCDI_dataFileBlock,) 168.98 576 T
( dataListBlockPtr\051;) 168.98 565 T
(dataBlockHeader->DBH_listHead = NULL;) 102.6 554 T
(dataBlockHeader->DBH_numItems = 1;) 102.6 543 T
(dataBlockHeader->DBH_chartBlock = chartFileBlock;) 102.6 532 T
(VMDirty\050dataListBlock\051;) 102.6 521 T
(VMUnlock\050dataListBlock\051;) 102.6 510 T
(/* Assume no error encountered */) 81 492 T
(return\050FALSE\051;) 102.6 481 T
(} /* end of MSG_GEN_DOCUMENT_INITALIZE_DOCUMENT_FILE */) 81 470 T
(/* MSG_GEN_DOCUMENT_ATTACH_UI_TO_DOCUMENT for MCDocumentClass) 81 452 T
( *) 81 441 T
( *) 81 430 T
(SYNOPSIS: Load in chart block, initialize data list gadget.) 102.6 430 T
( *) 81 419 T
(CONTEXT: Opening a file.) 102.6 419 T
( *) 81 408 T
(PARAMS: void\050void\051) 102.6 408 T
( */) 81 397 T
(@method MCDocumentClass, MSG_GEN_DOCUMENT_ATTACH_UI_TO_DOCUMENT {) 81 386 T
(MemHandle) 102.6 375 T
(dataListBlock;) 156.6 375 T
(MemHandle) 102.6 364 T
(*dataListBlockPtr = &dataListBlock;) 156.6 364 T
(DataBlockHeader *dataBlockHeader;) 102.6 353 T
(word) 102.6 342 T
(numItems;) 168.98 342 T
(optr) 102.6 331 T
(ourList;) 168.98 331 T
(VMBlockHandle) 102.6 320 T
(chartFileBlock;) 172.8 320 T
(optr) 102.6 309 T
(ourChart;) 168.98 309 T
(@callsuper\050\051;) 102.6 291 T
(pself = ObjDerefGen\050oself\051;) 102.6 280 T
(/* Get the block that contains our linked list and header info */) 81 262 T
(pself->MCDI_dataFileBlock = VMGetMapBlock\050pself->GDI_fileHandle\051;) 102.6 251 T
(dataBlockHeader = VMLock\050pself->GDI_fileHandle,) 102.6 240 T
( pself->MCDI_dataFileBlock,) 168.98 229 T
( dataListBlockPtr\051;) 168.98 218 T
(/* Extract the header info. */) 81 200 T
(pself->MCDI_dataListHead = dataBlockHeader->DBH_listHead;) 102.6 189 T
(numItems = dataBlockHeader->DBH_numItems;) 102.6 178 T
(chartFileBlock = dataBlockHeader->DBH_chartBlock;) 102.6 167 T
(VMUnlock\050dataListBlock\051;) 102.6 156 T
54 462.38 72 638.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 405.99 63 666.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 150.38 72 393.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 160.99 63 421.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "176" 36
%%Page: "177" 37
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(177) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* Made the MCChart a child of the document object. */) 81 642 T
(pself->MCDI_chartMemBlock = VMVMBlockToMemBlock\050pself->GDI_fileHandle,) 102.6 631 T
(chartFileBlock\051;) 232.2 620 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 102.6 609 T
( OptrToChunk\050@MCChart\051\051;) 168.98 598 T
(@send self::MSG_VIS_ADD_NON_DISCARDABLE_VM_CHILD\050ourChart, CCO_FIRST\051;) 102.6 587 T
(/* Initialize the data list gadget. */) 81 569 T
(ourList = ConstructOptr\050pself->GDI_display,) 102.6 558 T
(OptrToChunk\050@MCDataList\051\051;) 168.98 547 T
(@send ourList::MSG_GEN_DYNAMIC_LIST_INITIALIZE\050numItems\051;) 102.6 536 T
(@send ourList::MSG_GEN_ITEM_GROUP_SET_SINGLE_SELECTION\0500, FALSE\051;) 102.6 525 T
(} /* end of MSG_GEN_DOCUMENT_ATTACH_UI_TO_DOCUMENT */) 81 514 T
(/* MSG_GEN_DOCUMENT_DETACH_UI_FROM_DOCUMENT) 81 496 T
( *) 81 485 T
( *) 81 474 T
(SYNOPSIS: Remove the chart object.) 102.6 474 T
( *) 81 463 T
(CONTEXT: Closing the document.) 102.6 463 T
( *) 81 452 T
(PARAMS: void\050void\051) 102.6 452 T
( */) 81 441 T
(@method MCDocumentClass, MSG_GEN_DOCUMENT_DETACH_UI_FROM_DOCUMENT {) 81 430 T
(optr) 102.6 419 T
(ourChart;) 168.98 419 T
(@callsuper\050\051;) 102.6 401 T
(/* Remove the chart from the document. */) 81 383 T
(ourChart = ConstructOptr\050pself->MCDI_chartMemBlock,) 102.6 372 T
( OptrToChunk\050@MCChart\051\051;) 168.98 361 T
(@call ourChart::MSG_VIS_REMOVE_NON_DISCARDABLE\050 VUM_MANUAL \051;) 102.6 350 T
(}) 81 339 T
54 513.38 72 638.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 405.99 63 666.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
54 333.38 72 437.34 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
63 204.99 63 465.99 2 L
4 H
2 Z
0 X
0 0 0 1 0 0 0 K
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "177" 37
%%Page: "178" 38
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(178) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* CODE for MCChartClass */) 81 642 T
(/* MSG_VIS_DRAW for MCChartClass) 81 631 T
( *) 81 620 T
( *) 81 609 T
(SYNOPSIS: Draw the chart.) 102.6 609 T
( *) 81 598 T
(CONTEXT: System has asked the chart object to draw itself.) 102.6 598 T
( *) 81 587 T
(PARAMS: void\050DrawFlags drawFlags, GStateHandle gstate\051) 102.6 587 T
( */) 81 576 T
(@method MCChartClass, MSG_VIS_DRAW {) 81 565 T
(word) 102.6 554 T
(count;) 129.6 554 T
(word) 102.6 543 T
(*barArray;) 129.6 543 T
(/* Draw the axis markers */) 81 532 T
(GrDrawVLine\050gstate,) 102.6 521 T
( CHART_LEFT-BORDER_MARGIN,) 125 510 T
( BORDER_MARGIN,) 125 499 T
( CHART_BOTTOM\051;) 125 488 T
(GrDrawHLine\050gstate,) 102.6 477 T
( CHART_LEFT,) 125 466 T
( CHART_BOTTOM+BORDER_MARGIN,) 125 455 T
( VIEW_RIGHT - BORDER_MARGIN\051;) 125 444 T
(barArray = LMemDerefHandles\050OptrToHandle\050oself\051,) 102.6 433 T
( pself->MCCI_barArray\051;) 168.98 422 T
(/* Draw the bars */) 81 404 T
(for \050count = 0; count < pself->MCCI_numBars; count++\051) 102.6 393 T
( {) 102.6 382 T
(word) 125 371 T
(top, bottom, left, right;) 152 371 T
(bottom = CHART_BOTTOM;) 125 353 T
(top = bottom - barArray[count];) 125 342 T
(left = CHART_LEFT + \050count * BAR_WIDTH_ALLOW\051;) 125 331 T
(right = left + BAR_WIDTH;) 125 320 T
(GrFillRect\050gstate, left, top, right, bottom\051;) 125 309 T
( }) 102.6 298 T
(} /* end of MSG_VIS_DRAW */) 81 287 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "178" 38
%%Page: "179" 39
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
162 690.34 558 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Maintaining the Document) 382.99 692.67 T
162 666.34 558 678.01 R
7 X
V
1 10 Q
0 X
(179) 541.32 671.34 T
324 684 580 684 2 L
3 H
2 Z
N
495 90 558 125 R
7 X
V
2 55 Q
0 X
(.) 501.45 88.33 T
0 24 Q
(T) 414.77 110 T
(utorial) 427.66 110 T
90 99 270 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
90.67 123.5 270.67 135.67 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
536.84 533.33 557.67 545 R
V
0 8 Q
0 X
(7.10) 542.1 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* MSG_MCC_INSERT_BAR) 81 642 T
( *) 81 631 T
( *) 81 620 T
(SYNOPSIS: Add another bar to bar chart.) 102.6 620 T
( *) 81 609 T
(CONTEXT: The user has added another data item to the list.) 102.6 609 T
( *) 81 598 T
(PARAMS: void\050word ordinal, word value\051;) 102.6 598 T
( */) 81 587 T
(@method MCChartClass, MSG_MCC_INSERT_BAR {) 81 576 T
(word) 102.6 565 T
(count;) 145.8 565 T
(word) 102.6 554 T
(*barArray;) 145.8 554 T
(/* Insert new bar into array, shifting other bars over */) 81 543 T
(barArray = LMemDerefHandles\050OptrToHandle\050oself\051, pself->MCCI_barArray\051;) 102.6 532 T
(for\050count=pself->MCCI_numBars; count > ordinal; --count\051) 102.6 521 T
( {) 102.6 510 T
(barArray[count] = barArray[count-1];) 125 499 T
( }) 102.6 488 T
(barArray[ordinal] = value;) 102.6 477 T
(ObjMarkDirtyHandles\050OptrToHandle\050oself\051, pself->MCCI_barArray\051;) 102.6 466 T
(pself->MCCI_numBars++;) 102.6 448 T
(/* Mark ourself as in need of a redraw. */) 81 430 T
(@call self::MSG_VIS_MARK_INVALID\050VOF_IMAGE_INVALID,) 102.6 419 T
( VUM_DELAYED_VIA_APP_QUEUE\051;) 189 408 T
(} /* end of MSG_MCC_INSERT_BAR */) 81 397 T
(/* MSG_MCC_DELETE_BAR) 81 379 T
( *) 81 368 T
( *) 81 357 T
(SYNOPSIS: Remove a bar from the bar chart.) 102.6 357 T
( *) 81 346 T
(CONTEXT: User has deleted a data item from the list.) 102.6 346 T
( *) 81 335 T
(PARAMS: void\050word ordinal\051;) 102.6 335 T
( */) 81 324 T
(@method MCChartClass, MSG_MCC_DELETE_BAR {) 81 313 T
(word) 102.6 302 T
(count;) 145.8 302 T
(word) 102.6 291 T
(*barArray;) 145.8 291 T
(/* Update our instance data and data array */) 81 273 T
(pself->MCCI_numBars -=1;) 102.6 262 T
(barArray = LMemDerefHandles\050OptrToHandle\050oself\051,) 102.6 251 T
( pself->MCCI_barArray\051;) 168.98 240 T
(for\050count=ordinal; count < pself->MCCI_numBars; count++\051) 102.6 229 T
( {) 102.6 218 T
(barArray[count] = barArray[count+1];) 125 207 T
( }) 102.6 196 T
(ObjMarkDirtyHandles\050OptrToHandle\050oself\051, pself->MCCI_barArray\051;) 102.6 185 T
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "179" 39
%%Page: "180" 40
612 792 0 FMBEGINPAGE
[0 0 0 1 0 0 0]
[ 0 1 1 0 1 0 0]
[ 1 0 1 0 0 1 0]
[ 1 1 0 0 0 0 1]
[ 1 0 0 0 0 1 1]
[ 0 1 0 0 1 0 1]
[ 0 0 1 0 1 1 0]
 7 FrameSetSepColors
FrameNoSep
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
54 690.34 450 702 R
7 X
0 0 0 1 0 0 0 K
V
0 14 Q
0 X
(Documents and Displays) 54 692.67 T
54 666.34 450 678.01 R
7 X
V
1 10 Q
0 X
(180) 54 671.34 T
32 684 288 684 2 L
3 H
2 Z
N
54 90 117 125 R
7 X
V
2 55 Q
0 X
(.) 60.45 88.33 T
0 24 Q
(T) 102 110 T
(utorial) 114.89 110 T
306 99 486 117 R
7 X
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
305.67 122.67 485.67 134.83 R
V
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
54.33 533.33 75.17 545 R
V
0 8 Q
0 X
(7.10) 54.33 539.67 T
81 144 531 648 R
7 X
V
4 9 Q
0 X
(/* Mark ourselves as in need of a redraw. */) 81 642 T
(@call self::MSG_VIS_MARK_INVALID\050VOF_IMAGE_INVALID,) 102.6 631 T
( VUM_DELAYED_VIA_APP_QUEUE\051;) 189 620 T
(} /* end of MSG_MCC_DELETE_BAR */) 81 609 T
(/* MSG_MCC_RESIZE_BAR) 81 591 T
( *) 81 580 T
( *) 81 569 T
(SYNOPSIS: Resize a bar.) 102.6 569 T
( *) 81 558 T
(CONTEXT: User has changed the value of a data item.) 102.6 558 T
( *) 81 547 T
(PARAMS: void\050word ordinal, word value\051;) 102.6 547 T
( */) 81 536 T
(@method MCChartClass, MSG_MCC_RESIZE_BAR {) 81 525 T
(word) 102.6 514 T
(*barArray;) 145.8 514 T
(/* Update the array */) 81 496 T
(barArray = LMemDerefHandles\050OptrToHandle\050oself\051,) 102.6 485 T
( pself->MCCI_barArray\051;) 168.98 474 T
(barArray[ordinal] = value;) 102.6 463 T
(ObjMarkDirtyHandles\050OptrToHandle\050oself\051, pself->MCCI_barArray\051;) 102.6 452 T
(/* Mark ourself as in need of a redraw. */) 81 434 T
(@call self::MSG_VIS_MARK_INVALID\050VOF_IMAGE_INVALID,) 102.6 423 T
( VUM_DELAYED_VIA_APP_QUEUE\051;) 189 412 T
(} /* end of MSG_MCC_RESIZE_BAR */) 81 401 T
81 376.98 531 389 C
0 0 0 1 0 0 0 K
0 0 0 1 0 0 0 K
81 376.98 531 389 R
7 X
0 0 0 1 0 0 0 K
V
76.5 384.23 617.5 387.73 R
4 X
V
0.5 H
2 Z
N
36 72 576 720 C
0 0 1 0 1 1 0 K
0 0 0 1 0 0 0 K
FMENDPAGE
%%EndPage: "180" 40
%%Trailer
%%BoundingBox: 0 0 612 792
%%PageOrder: Ascend
%%Pages: 40
%%DocumentFonts: Helvetica-Bold
%%+ NewCenturySchlbk-Roman
%%+ ZapfDingbats
%%+ NewCenturySchlbk-Bold
%%+ Courier
%%+ NewCenturySchlbk-Italic
%%EOF
