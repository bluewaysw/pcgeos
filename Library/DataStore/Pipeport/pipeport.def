COMMENT @%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

	Copyright (c) Geoworks 1996.  All rights reserved.

PROJECT:	
MODULE:		Pipeport
FILE:		pipeport.def

AUTHOR:		Robert Greenwalt, Nov 26, 1996

MACROS:
	Name			Description
	----			-----------

REVISION HISTORY:
	Name	Date		Description
	----	----		-----------
	robertg	11/26/96   	Initial revision

DESCRIPTION:

	
		
	$Id: pipeport.def,v 1.1 97/04/04 17:54:00 newdeal Exp $

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@


;*****************************************************************************
;		Structures
;*****************************************************************************

DSPipePortData	struct
DSPPD_dsToken		word		; The DS token returned by
					; DataStoreOpen or Null if we haven't
					; succesfully opened anything
					; yet.
DSPPD_transaction	dword		; The transaction# we should
					; be exporting changes since
					; (0 if none)
DSPPD_lastAction	DXInfoWord	; The last InfoWord of a
					; segmented data transfer
	
DSPipePortData	ends


;*****************************************************************************
;		Constants
;*****************************************************************************


MAX_EXPORT_SIZE equ	10h
;
; Sets the limit for segmentation
;



;****************************************************************************
;		Macros
;****************************************************************************
; Make a macro to make refreshing the DataStore token from our custom 
; data easier since we're going to have to do it a lot.
;
RefreshToken	macro reg1, fpointer

	pushdw	esdi
	les	di, {DataXBehaviorArguments} fpointer.DXBA_customData
	mov	reg1, ({DSPipePortData}es:[di]).DSPPD_dsToken
	popdw	esdi
endm
